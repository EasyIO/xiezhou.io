<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Wish a Starbucks Coffee Here!</title>
  
  <subtitle>What is your favorite coffee in Starbucks?</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://8oc.cc/"/>
  <updated>2021-06-16T12:46:58.930Z</updated>
  <id>http://8oc.cc/</id>
  
  <author>
    <name>8oc</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>常用的linux工具</title>
    <link href="http://8oc.cc/2021/06/16/linux-centos-useful/"/>
    <id>http://8oc.cc/2021/06/16/linux-centos-useful/</id>
    <published>2021-06-16T12:33:20.000Z</published>
    <updated>2021-06-16T12:46:58.930Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Tcpdump"><a href="#Tcpdump" class="headerlink" title="Tcpdump"></a>Tcpdump</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 混杂模式</span></span><br><span class="line">ifconfig ens192 promisc,设置网卡eth0为混杂模式</span><br><span class="line">ifconfig ens192 -promisc 取消网卡eth0的混杂模式</span><br><span class="line"></span><br><span class="line"><span class="comment"># tcpdump -抓取主机192.25.0.1和主机192.25.0.2或者192.25.0.3通信</span></span><br><span class="line">sudo -s tcpdump -i ens192 <span class="string">'host 192.25.0.1 and  (192.25.0.2 or 192.25.0.3) -w tcpdump-report/0330001.cap</span></span><br><span class="line"><span class="string">#查看文件</span></span><br><span class="line"><span class="string">tcpdump -r xxx.cap</span></span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="WC-l"><a href="#WC-l" class="headerlink" title="WC-l"></a>WC-l</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#grep的or写法\|</span></span><br><span class="line">cat prod-access.log |grep <span class="string">"xxx"</span>|grep <span class="string">"xxx\|xxx\|xxx"</span>|wc -l</span><br></pre></td></tr></table></figure><h2 id="连接数"><a href="#连接数" class="headerlink" title="连接数"></a>连接数</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mqtt笔记</span></span><br><span class="line"><span class="built_in">cd</span> /utcloud/utbroker/logs</span><br><span class="line">netstat -apl|grep 9005</span><br><span class="line"><span class="comment">#连接数</span></span><br><span class="line">netstat -n|grep  ^tcp|awk <span class="string">'&#123;print $NF&#125;'</span>|sort -nr|uniq -c</span><br><span class="line"><span class="comment">#统计</span></span><br><span class="line">netstat -apn|grep 9005|wc -l</span><br><span class="line">lsof -i|grep 9005</span><br></pre></td></tr></table></figure><h2 id="内存分析perf"><a href="#内存分析perf" class="headerlink" title="内存分析perf"></a>内存分析perf</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">perf top</span><br><span class="line">perf --<span class="built_in">help</span></span><br><span class="line">perf list</span><br><span class="line">perf record</span><br><span class="line">perf report </span><br><span class="line">perf report -i perf.data  //-i表示文件输入</span><br></pre></td></tr></table></figure><h2 id="增加端口数量"><a href="#增加端口数量" class="headerlink" title="增加端口数量"></a>增加端口数量</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysctl.conf</span><br><span class="line">/sbin/sysctl -p</span><br><span class="line">net.ipv4.ip_local_port_range=10000 60000</span><br><span class="line">***service  iptables stop</span><br><span class="line">cat /proc/sys/net/ipv4/ip_local_port_range </span><br><span class="line">9000 65500</span><br></pre></td></tr></table></figure><h2 id="mock程序后台运行"><a href="#mock程序后台运行" class="headerlink" title="mock程序后台运行"></a>mock程序后台运行</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nohup python3 /home/mock/project/japronto/main.py 1&gt;/dev/null 2&gt;&amp;1 &amp;</span><br><span class="line"><span class="comment">#输入exit退出终端，关闭shell</span></span><br><span class="line">***python3 /home/mock/project/japronto/main.py</span><br><span class="line">***nohup python -u xx.py &gt; log.out 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><h2 id="服务器信息"><a href="#服务器信息" class="headerlink" title="服务器信息"></a>服务器信息</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#CPU信息：</span></span><br><span class="line">lscpu</span><br><span class="line"><span class="comment">#内存：</span></span><br><span class="line">cat /proc/meminfo | grep MemTotal</span><br><span class="line"><span class="comment">#磁盘：</span></span><br><span class="line">fdisk -l | grep Disk</span><br><span class="line">df -hl</span><br><span class="line"><span class="comment">#内核：</span></span><br><span class="line">uname -a</span><br><span class="line">uname -r</span><br><span class="line"><span class="comment">#物理cpu个数</span></span><br><span class="line">cat /proc/cpuinfo|grep <span class="string">"cores"</span>|uniq</span><br><span class="line"><span class="comment">#查看逻辑cpu个数</span></span><br><span class="line">cat /proc/cpuinfo|grep <span class="string">"processor"</span> |wc -l</span><br><span class="line"><span class="comment">#cpu核数</span></span><br><span class="line">cat /proc/cpuinfo|grep <span class="string">"physical id"</span>|sort|uniq| wc -l</span><br></pre></td></tr></table></figure><h2 id="Supervisor"><a href="#Supervisor" class="headerlink" title="Supervisor"></a>Supervisor</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#更改 Supervisor 启动时的配置文件路径。</span></span><br><span class="line"><span class="comment">#1.停止 Supervisor 所有的监控对象</span></span><br><span class="line">supervisorctl stop all</span><br><span class="line"><span class="comment">#2.停止 </span></span><br><span class="line"><span class="built_in">kill</span> -9 supervisord 进程</span><br><span class="line"><span class="comment">#3.修改配置文件</span></span><br><span class="line">vim /etc/supervisord.conf</span><br><span class="line"><span class="comment">#4.修改 tmp 路径，我常用的路径为 /home/supervisor ，最终结果为</span></span><br><span class="line">/tmp/supervisor.sock =&gt; /home/supervisor/supervisor.sock</span><br><span class="line"><span class="comment">#5.重新启动 supervisord 。</span></span><br><span class="line">****supervisorctl status</span><br><span class="line">****supervisorctl restart xxx</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Tcpdump&quot;&gt;&lt;a href=&quot;#Tcpdump&quot; class=&quot;headerlink&quot; title=&quot;Tcpdump&quot;&gt;&lt;/a&gt;Tcpdump&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 混杂模式&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ifconfig ens192 promisc,设置网卡eth0为混杂模式&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ifconfig ens192 -promisc 取消网卡eth0的混杂模式&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# tcpdump -抓取主机192.25.0.1和主机192.25.0.2或者192.25.0.3通信&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo -s tcpdump -i ens192 &lt;span class=&quot;string&quot;&gt;&#39;host 192.25.0.1 and  (192.25.0.2 or 192.25.0.3) -w tcpdump-report/0330001.cap&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;#查看文件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;tcpdump -r xxx.cap&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="运维π" scheme="http://8oc.cc/categories/%E8%BF%90%E7%BB%B4%CF%80/"/>
    
    
      <category term="CentOS" scheme="http://8oc.cc/tags/CentOS/"/>
    
      <category term="Linux" scheme="http://8oc.cc/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Nginx限制IP配置</title>
    <link href="http://8oc.cc/2021/06/16/nginx-ip/"/>
    <id>http://8oc.cc/2021/06/16/nginx-ip/</id>
    <published>2021-06-16T12:22:39.000Z</published>
    <updated>2021-06-16T12:27:17.318Z</updated>
    
    <content type="html"><![CDATA[<h2 id="多站点统一限IP"><a href="#多站点统一限IP" class="headerlink" title="多站点统一限IP"></a>多站点统一限IP</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vim nginx.conf</span><br><span class="line">allow 127.0.0.1;</span><br><span class="line">deny all;</span><br><span class="line"><span class="comment"># 以上代码解释：</span></span><br><span class="line"><span class="comment"># deny all; 限制所有的ip</span></span><br><span class="line"><span class="comment"># allow ip;   除了 这个ip意外</span></span><br><span class="line"><span class="comment"># 处理allow 以外的ip，全都禁止访问</span></span><br><span class="line"><span class="comment"># 注意：多站点统一限ip,需要将以上内容直接写在server&#123;&#125;的外围</span></span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="站点限IP"><a href="#站点限IP" class="headerlink" title="站点限IP"></a>站点限IP</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">vim www.XXX.conf</span><br><span class="line">server&#123;</span><br><span class="line">    server_name www.XXX.com;</span><br><span class="line">    location ~ /                 <span class="comment"># 不是 ~ /\.</span></span><br><span class="line">    &#123;</span><br><span class="line">        allow 127.0.0.1;</span><br><span class="line">        deny all;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;  </span><br><span class="line"><span class="comment"># 以上代码解释：</span></span><br><span class="line"><span class="comment"># deny all; 限制所有的ip</span></span><br><span class="line"><span class="comment"># allow ip;   除了 这个ip意外</span></span><br><span class="line"><span class="comment"># www.xxx.com的域名只允许allow的ip访问，其他全都禁止访问</span></span><br><span class="line"><span class="comment"># 注意：单站点统一限ip,需要将以上内容直接写在 某一域名配置的server&#123;&#125;内</span></span><br></pre></td></tr></table></figure><h2 id="站点限项目路径访问"><a href="#站点限项目路径访问" class="headerlink" title="站点限项目路径访问"></a>站点限项目路径访问</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">vim www.XXX.conf</span><br><span class="line">location ^~ /process-bar/ </span><br><span class="line">&#123;</span><br><span class="line">      deny all;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 以上代码解释：</span></span><br><span class="line"><span class="comment"># ^~ /process-bar/  以/process-bar/ 开头的项目路径</span></span><br><span class="line"><span class="comment"># deny all; 限制所有的ip</span></span><br><span class="line"><span class="comment"># www.xxx.com的域名，以/process-bar/ 开头的项目路径，禁止所有ip访问</span></span><br><span class="line"><span class="comment"># 注意：单站点统一限制访问项目路径,需要将以上内容直接写在 某一域名配置的server&#123;&#125;内</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;多站点统一限IP&quot;&gt;&lt;a href=&quot;#多站点统一限IP&quot; class=&quot;headerlink&quot; title=&quot;多站点统一限IP&quot;&gt;&lt;/a&gt;多站点统一限IP&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vim nginx.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;allow 127.0.0.1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;deny all;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 以上代码解释：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# deny all; 限制所有的ip&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# allow ip;   除了 这个ip意外&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 处理allow 以外的ip，全都禁止访问&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 注意：多站点统一限ip,需要将以上内容直接写在server&amp;#123;&amp;#125;的外围&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="技术π" scheme="http://8oc.cc/categories/%E6%8A%80%E6%9C%AF%CF%80/"/>
    
    
      <category term="Nginx" scheme="http://8oc.cc/tags/Nginx/"/>
    
  </entry>
  
  <entry>
    <title>常用的SQL</title>
    <link href="http://8oc.cc/2021/06/16/useful-sql/"/>
    <id>http://8oc.cc/2021/06/16/useful-sql/</id>
    <published>2021-06-16T12:08:57.000Z</published>
    <updated>2021-06-16T12:29:00.161Z</updated>
    
    <content type="html"><![CDATA[<h2 id="常用的SQL"><a href="#常用的SQL" class="headerlink" title="常用的SQL"></a>常用的SQL</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">--消耗cpu最高的10条语句</span><br><span class="line">select * from (select address,hash_value,</span><br><span class="line">                      round(cpu_time/1000000) cpu_time_s,</span><br><span class="line">                      round(cpu_time/decode(executions,0,1,executions)/1000000,2) cpu_time_per,</span><br><span class="line">                      executions,</span><br><span class="line">                      SQL_TEXT</span><br><span class="line">               from v<span class="variable">$sqlarea</span> </span><br><span class="line">               order by cpu_time_s desc) </span><br><span class="line"><span class="built_in">where</span> rownum &lt;= 10; </span><br><span class="line"></span><br><span class="line">--查询前10条性能差的sql语句</span><br><span class="line">SELECT * FROM (select PARSING_USER_ID,EXECUTIONS,SORTS,COMMAND_TYPE,DISK_READS,sql_text FROM v<span class="variable">$sqlarea</span>  </span><br><span class="line">order BY disk_reads DESC )<span class="built_in">where</span> ROWNUM&lt;10 ; </span><br><span class="line"></span><br><span class="line">--查询最占资源的sql</span><br><span class="line">select b.username username,a.disk_reads reads,a.executions <span class="built_in">exec</span>,  </span><br><span class="line">    a.disk_reads/decode(a.executions,0,1,a.executions) rds_exec_ratio,  </span><br><span class="line">    a.sql_text statement  </span><br><span class="line">    from v<span class="variable">$sqlarea</span> a,dba_users b  </span><br><span class="line">    <span class="built_in">where</span> a.parsing_user_id=b.user_id  </span><br><span class="line">    and a.disk_reads&gt;100000;</span><br></pre></td></tr></table></figure><a id="more"></a><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line">---查询指定时间内的racle执行的SQL语句</span><br><span class="line">SELECT SYSTIMESTAMP FROM dual;</span><br><span class="line">select b.SQL_TEXT,b.FIRST_LOAD_TIME,b.SQL_FULLTEXT,b.PARSING_SCHEMA_NAME</span><br><span class="line">  from v<span class="variable">$sqlarea</span> b</span><br><span class="line"><span class="built_in">where</span> b.FIRST_LOAD_TIME between <span class="string">'2018-03-14/09:43:24'</span> and</span><br><span class="line">       <span class="string">'2018-03-14/09:50:00'</span> order by b.FIRST_LOAD_TIME; </span><br><span class="line"></span><br><span class="line">---查询oracle正在执行的sql</span><br><span class="line">select a.username, a.sid,b.SQL_TEXT, b.SQL_FULLTEXT</span><br><span class="line">  from v<span class="variable">$session</span> a, v<span class="variable">$sqlarea</span> b </span><br><span class="line"><span class="built_in">where</span> a.sql_address = b.address;</span><br><span class="line"></span><br><span class="line">---查询被锁的sql</span><br><span class="line">SELECT object_name, machine, s.sid, s.serial<span class="comment"># </span></span><br><span class="line">FROM gv<span class="variable">$locked_object</span> l, dba_objects o, gv<span class="variable">$session</span> s </span><br><span class="line">WHERE l.object_id　= o.object_id </span><br><span class="line">AND l.session_id = s.sid; </span><br><span class="line"></span><br><span class="line">---挂号主键冲突处理     </span><br><span class="line">select *</span><br><span class="line">        from user_constraints  a,USER_CONS_COLUMNS b</span><br><span class="line">        <span class="built_in">where</span>  a.CONSTRAINT_TYPE=<span class="string">'P'</span></span><br><span class="line">              and a. constraint_name=b.constraint_name </span><br><span class="line">               and a.constraint_name=<span class="string">'PK_REFUND_APPLY'</span>;--EMR.IX_PRESC_NO</span><br><span class="line">                                         </span><br><span class="line">---查找索引对应的表               </span><br><span class="line">select index_name,table_name from user_indexes WHERE index_name =<span class="string">'PK_PCA_PATIENT_SERVICE_CARD_IN'</span> ;  --PKG_PCA_CARD</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---1. 就可以在session级别跳过无效索引作查询。</span><br><span class="line">alter session <span class="built_in">set</span> skip_unusable_indexes=<span class="literal">true</span>;</span><br><span class="line">--2. 分区索引应适用user_ind_partitions。</span><br><span class="line">--3. 状态分4种：</span><br><span class="line">--    N/A说明这个是分区索引需要查user_ind_partitions或者user_ind_subpartitions来确定每个分区是否可用；</span><br><span class="line">--    VAILD说明这个索引可用；</span><br><span class="line">---   UNUSABLE说明这个索引不可用；</span><br><span class="line">--    USABLE 说明这个索引的分区是可用的。</span><br><span class="line"></span><br><span class="line">--- 查询当前索引的状态：</span><br><span class="line">select distinct status from user_indexes;</span><br><span class="line"></span><br><span class="line">---查询那个索引无效：</span><br><span class="line">select index_name from  user_indexes <span class="built_in">where</span> status &lt;&gt; <span class="string">'VALID'</span> AND index_name LIKE <span class="string">'PK_REFUND_APPLY'</span>;</span><br><span class="line"></span><br><span class="line">--- 详细讲解可参考：http://www.sudu.cn/info/html/edu/20071225/20526.html。</span><br><span class="line"></span><br><span class="line">---批量rebuild下：</span><br><span class="line">select <span class="string">'alter index '</span>||index_name||<span class="string">' rebuild online;'</span> from  user_indexes <span class="built_in">where</span> status &lt;&gt; <span class="string">'VALID'</span> and index_name not like<span class="string">'%$$'</span>;</span><br><span class="line"></span><br><span class="line">---查询表中是否有重复的记录</span><br><span class="line"></span><br><span class="line">SELECT ID,COUNT(1) FROM REFUND_APPLY GROUP BY ID HAVING COUNT(1)&gt;1;</span><br><span class="line"></span><br><span class="line">---去除表中的重复记录，但去除后需要把对应的索引，主外键添加到表中</span><br><span class="line">CREATE TABLE  test_table AS </span><br><span class="line">  SELECT DISTINCT * FROM bms.REFUND_APPLY_DETAIL;</span><br><span class="line">DROP TABLE bms.REFUND_APPLY_DETAIL;</span><br><span class="line">ALTER TABLE test_table RENAME TO REFUND_APPLY_DETAIL;</span><br><span class="line"></span><br><span class="line">---恢复索引</span><br><span class="line">DROP INDEX PK_REFUND_APPLY;</span><br><span class="line">alter index PK_REFUND_APPLY rebuild online;</span><br><span class="line">alter index PK_REFUND_APPLY rebuild partition PK_REFUND_APPLY (online);</span><br><span class="line"></span><br><span class="line">---解除索引和表的关联</span><br><span class="line">alter TABLE bms.REFUND_APPLY drop constraint PK_REFUND_APPLY---（索引名）</span><br><span class="line"></span><br><span class="line">---查询索引的分区</span><br><span class="line">SELECT * FROM  dba_tab_partitions WHERE table_owner = <span class="string">'BMS'</span> AND TABLE_NAME LIKE  <span class="string">'%REFUND_APPLY%'</span></span><br><span class="line">SELECT * FROM  dba_ind_partitions WHERE INDEX_NAME =<span class="string">'PK_REFUND_APPLY'</span></span><br><span class="line">               </span><br><span class="line">---批量解锁sql</span><br><span class="line">select Distinct <span class="string">'alter system kill session '</span>||chr(39)||b.sid||<span class="string">','</span>||b.serial<span class="comment">#||chr(39)||';' As cmd,b.username,b.logon_time from v$locked_object a,v$session b where a.session_id=b.sid </span></span><br><span class="line">         </span><br><span class="line">--解锁SQL，根据查询出被锁表的SID和SERIAL解锁</span><br><span class="line">ALTER system <span class="built_in">kill</span> session <span class="string">'SID, SERIAL'</span>; </span><br><span class="line"></span><br><span class="line">ALTER system <span class="built_in">kill</span> session <span class="string">'3207, 693'</span>; </span><br><span class="line"></span><br><span class="line">---查看哪些用户连到了DB上，使用什么Program连接</span><br><span class="line">SELECT s.sid, --Session identifier  </span><br><span class="line">       s.serial<span class="comment">#,--Session serial number. Used to uniquely identify a session's objects.  </span></span><br><span class="line">       p.spid, --Operating system process identifier  </span><br><span class="line">       p.pid, --Oracle process identifier  </span><br><span class="line">       s.username,--Oracle DB username  </span><br><span class="line">       s.osuser,--Operating system client user name  </span><br><span class="line">       s.TERMINAL,--Operating system terminal name  </span><br><span class="line">       s.program,--Operating system program name  </span><br><span class="line">       s.STATUS--Status of the session.ACTIVE,INACTIVE,KILLED,CACHED,SNIPED     </span><br><span class="line">FROM   v<span class="variable">$session</span> s,v<span class="variable">$process</span> p  </span><br><span class="line">WHERE   p.addr = s.paddr  </span><br><span class="line">AND s.type != <span class="string">'BACKGROUND'</span>;</span><br><span class="line"></span><br><span class="line">--查看表空间使用率</span><br><span class="line">SELECT a.tablespace_name <span class="string">"表空间名"</span>,</span><br><span class="line">        total / 1024 / 1024 <span class="string">"表空间大小单位M"</span>,</span><br><span class="line">        free / 1024 / 1024 <span class="string">"表空间剩余大小单位M"</span>,</span><br><span class="line">        (total - free) / 1024 / 1024 <span class="string">"表空间使用大小单位M"</span>,</span><br><span class="line">        Round((total - free) / total, 4) * 100 <span class="string">"使用率   [[%]]"</span>FROM (SELECT tablespace_name,Sum(bytes) free FROM DBA_FREE_SPACE GROUP BY tablespace_name) a,</span><br><span class="line">         (SELECT tablespace_name, Sum(bytes) total</span><br><span class="line">          FROM DBA_DATA_FILES</span><br><span class="line">          GROUP BY tablespace_name) b</span><br><span class="line">WHERE a.tablespace_name = b.tablespace_name;</span><br><span class="line"></span><br><span class="line">--查看当前用户下的表名及对应的表空间</span><br><span class="line">select segment_name table_name,tablespace_name,bytes</span><br><span class="line">from user_segments </span><br><span class="line"><span class="built_in">where</span> segment_type = <span class="string">'TABLE'</span> AND segment_name LIKE <span class="string">'%LOG%'</span> ; </span><br><span class="line"></span><br><span class="line">--- empward.dat</span><br><span class="line">SELECT bed_id,bed_code,nursing_unit_code,ward_code FROM pts.BED_INFO  WHERE status_code!=<span class="string">'A'</span>AND nursing_unit_code=<span class="string">'213415'</span> ORDER BY bed_code  </span><br><span class="line"></span><br><span class="line">---oracle断开用户</span><br><span class="line">select <span class="string">'alter system kill session '</span><span class="string">''</span>||sid||<span class="string">','</span>||serial<span class="comment">#||''';' from v$session;</span></span><br><span class="line"></span><br><span class="line">---当前的连接数</span><br><span class="line">select count(*) from v<span class="variable">$session</span>; </span><br><span class="line">SELECT COUNT(*) FROM v<span class="variable">$process</span>;</span><br><span class="line"></span><br><span class="line">----并发连接数</span><br><span class="line">Select count(*) from v<span class="variable">$session</span> <span class="built_in">where</span> status=<span class="string">'ACTIVE'</span>;</span><br><span class="line"></span><br><span class="line">--数据库允许的最大连接数</span><br><span class="line">select value from v<span class="variable">$parameter</span> <span class="built_in">where</span> name = <span class="string">'processes'</span> ;</span><br><span class="line"></span><br><span class="line">---最大连接 </span><br><span class="line">show parameter processes;</span><br><span class="line"></span><br><span class="line">----查看不同用户的连接数</span><br><span class="line">select username,count(username) from v<span class="variable">$session</span> <span class="built_in">where</span> username is not null group by username;</span><br><span class="line"></span><br><span class="line">--重启数据库:</span><br><span class="line">shutdown immediate;</span><br><span class="line">startup;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;常用的SQL&quot;&gt;&lt;a href=&quot;#常用的SQL&quot; class=&quot;headerlink&quot; title=&quot;常用的SQL&quot;&gt;&lt;/a&gt;常用的SQL&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;--消耗cpu最高的10条语句&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;select * from (select address,hash_value,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                      round(cpu_time/1000000) cpu_time_s,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                      round(cpu_time/decode(executions,0,1,executions)/1000000,2) cpu_time_per,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                      executions,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                      SQL_TEXT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;               from v&lt;span class=&quot;variable&quot;&gt;$sqlarea&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;               order by cpu_time_s desc) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;where&lt;/span&gt; rownum &amp;lt;= 10; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--查询前10条性能差的sql语句&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SELECT * FROM (select PARSING_USER_ID,EXECUTIONS,SORTS,COMMAND_TYPE,DISK_READS,sql_text FROM v&lt;span class=&quot;variable&quot;&gt;$sqlarea&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;order BY disk_reads DESC )&lt;span class=&quot;built_in&quot;&gt;where&lt;/span&gt; ROWNUM&amp;lt;10 ; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--查询最占资源的sql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;select b.username username,a.disk_reads reads,a.executions &lt;span class=&quot;built_in&quot;&gt;exec&lt;/span&gt;,  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    a.disk_reads/decode(a.executions,0,1,a.executions) rds_exec_ratio,  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    a.sql_text statement  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    from v&lt;span class=&quot;variable&quot;&gt;$sqlarea&lt;/span&gt; a,dba_users b  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;where&lt;/span&gt; a.parsing_user_id=b.user_id  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    and a.disk_reads&amp;gt;100000;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="技术π" scheme="http://8oc.cc/categories/%E6%8A%80%E6%9C%AF%CF%80/"/>
    
    
      <category term="Oracle" scheme="http://8oc.cc/tags/Oracle/"/>
    
  </entry>
  
  <entry>
    <title>导航模板</title>
    <link href="http://8oc.cc/2021/06/15/bookmark-demo/"/>
    <id>http://8oc.cc/2021/06/15/bookmark-demo/</id>
    <published>2021-06-15T14:24:21.000Z</published>
    <updated>2021-06-16T12:31:43.285Z</updated>
    
    <content type="html"><![CDATA[<h2 id="导航模板"><a href="#导航模板" class="headerlink" title="导航模板"></a>导航模板</h2><a id="more"></a><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">    &lt;!-- import CSS --&gt;</span><br><span class="line">    &lt;link rel=<span class="string">"stylesheet"</span> href=<span class="string">"https://unpkg.com/element-ui/lib/theme-chalk/index.css"</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;style&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;div id=<span class="string">"app"</span>&gt;</span><br><span class="line">      &lt;el-container&gt;</span><br><span class="line">        &lt;el-aside width=<span class="string">"200px"</span>&gt;</span><br><span class="line">        &lt;/el-aside&gt;</span><br><span class="line">        &lt;el-container&gt;</span><br><span class="line">          &lt;el-header&gt;</span><br><span class="line">            &lt;el-menu</span><br><span class="line">                    default-active=<span class="string">"1"</span></span><br><span class="line">                    class=<span class="string">"el-menu-demo"</span></span><br><span class="line">                    mode=<span class="string">"horizontal"</span></span><br><span class="line">            &gt;</span><br><span class="line">              &lt;!-- 起始 --&gt;</span><br><span class="line">              &lt;el-menu-item index=<span class="string">"1"</span>&gt;&lt;a</span><br><span class="line">                      href=<span class="string">"www.xxx.com"</span></span><br><span class="line">                      target=<span class="string">"_blank"</span></span><br><span class="line">              &gt;xxx&lt;/a&gt;</span><br><span class="line">              &lt;/el-menu-item&gt;</span><br><span class="line">              &lt;!-- 终止 --&gt;</span><br><span class="line">            &lt;/el-menu&gt;</span><br><span class="line">          &lt;/el-header&gt;</span><br><span class="line">          &lt;el-main&gt;</span><br><span class="line">            &lt;el-card&gt;</span><br><span class="line">              &lt;el-tabs&gt;</span><br><span class="line">                &lt;!-- 起始 --&gt;</span><br><span class="line">                &lt;el-tab-pane label=<span class="string">"xxx"</span>&gt;</span><br><span class="line">                  &lt;el-table</span><br><span class="line">                          :data=<span class="string">"tableData1"</span></span><br><span class="line">                          @row-click=<span class="string">"click"</span></span><br><span class="line">                          @row-dblclick=<span class="string">"dblclick"</span></span><br><span class="line">                          style=<span class="string">"width: 100%"</span></span><br><span class="line">                  &gt;</span><br><span class="line">                    &lt;el-table-column</span><br><span class="line">                            <span class="built_in">type</span>=<span class="string">"index"</span></span><br><span class="line">                            label=<span class="string">"ID"</span></span><br><span class="line">                    &gt;&lt;/el-table-column&gt;</span><br><span class="line">                    &lt;el-table-column</span><br><span class="line">                            prop=<span class="string">"name"</span></span><br><span class="line">                            label=<span class="string">"名称"</span></span><br><span class="line">                            show-overflow-tooltip</span><br><span class="line">                    &gt;&lt;/el-table-column&gt;</span><br><span class="line">                    &lt;el-table-column</span><br><span class="line">                            prop=<span class="string">"url"</span></span><br><span class="line">                            label=<span class="string">"地址"</span></span><br><span class="line">                            show-overflow-tooltip</span><br><span class="line">                    &gt;&lt;/el-table-column&gt;</span><br><span class="line">                  &lt;/el-table&gt;</span><br><span class="line"></span><br><span class="line">                &lt;/el-tab-pane&gt;</span><br><span class="line">                &lt;!-- 终止 --&gt;</span><br><span class="line">              &lt;/el-tabs&gt;</span><br><span class="line">            &lt;/el-card&gt;</span><br><span class="line"></span><br><span class="line">          &lt;/el-main&gt;</span><br><span class="line">        &lt;/el-container&gt;</span><br><span class="line">        &lt;el-aside width=<span class="string">"200px"</span>&gt;&lt;/el-aside&gt;</span><br><span class="line">      &lt;/el-container&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">  &lt;!-- import Vue before Element --&gt;</span><br><span class="line">&lt;script src=<span class="string">"https://unpkg.com/vue/dist/vue.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;!--&lt;script src=<span class="string">"https://cdn.bootcss.com/vue/2.6.10/vue.min.js"</span>&gt;&lt;/script&gt;--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- import JavaScript --&gt;</span><br><span class="line">&lt;script src=<span class="string">"https://unpkg.com/element-ui/lib/index.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;!--&lt;script src=<span class="string">"https://cdn.bootcss.com/element-ui/2.7.2/index.js"</span>&gt;&lt;/script&gt;--&gt;</span><br><span class="line"></span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    new Vue(&#123;</span><br><span class="line">      el: <span class="string">'#app'</span>,</span><br><span class="line">      data: <span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">        <span class="built_in">return</span> &#123;</span><br><span class="line">          visible: <span class="literal">false</span>,</span><br><span class="line">          activeName: <span class="string">'second'</span>,</span><br><span class="line">          tableData1: [</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#123;</span><br><span class="line">              <span class="string">"name"</span>:<span class="string">"xxx"</span>,</span><br><span class="line">              <span class="string">"url"</span>:<span class="string">"xxx"</span></span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          tableData2: [</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="string">"name"</span>: <span class="string">"xxx"</span>,</span><br><span class="line">              <span class="string">"url"</span>: <span class="string">"xxx"</span></span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            </span><br><span class="line">          ],</span><br><span class="line">                    </span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line">        dblclick(row, event, column) &#123;</span><br><span class="line">          window.open(row.url);</span><br><span class="line">        &#125;,</span><br><span class="line">        click(row, event, column) &#123;</span><br><span class="line">          this.<span class="variable">$notify</span>.info(&#123;</span><br><span class="line">            title: <span class="string">"小提示"</span>,</span><br><span class="line">            message: <span class="string">"双击当前行可以直接打开页面"</span>,</span><br><span class="line">            duration: 2000</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;导航模板&quot;&gt;&lt;a href=&quot;#导航模板&quot; class=&quot;headerlink&quot; title=&quot;导航模板&quot;&gt;&lt;/a&gt;导航模板&lt;/h2&gt;
    
    </summary>
    
      <category term="技术π" scheme="http://8oc.cc/categories/%E6%8A%80%E6%9C%AF%CF%80/"/>
    
    
  </entry>
  
  <entry>
    <title>Jmeter使用教程</title>
    <link href="http://8oc.cc/2021/04/24/apache-jmeter-learning/"/>
    <id>http://8oc.cc/2021/04/24/apache-jmeter-learning/</id>
    <published>2021-04-24T09:48:05.000Z</published>
    <updated>2021-04-24T10:36:12.554Z</updated>
    
    <content type="html"><![CDATA[<h2 id="常用"><a href="#常用" class="headerlink" title="常用"></a>常用</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">./jmeter -n -t XX.jmx -l report/01-result.jtl -e -o report</span><br><span class="line"><span class="comment">#日志文件配置</span></span><br><span class="line">修改log4j2.xml文件</span><br><span class="line">在jmeter所在bin目录下修改log4j2.xml，修改方式如下：</span><br><span class="line">修改，level也可以为info,error等，一般jmter执行日志设置成debug</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">RPS ：每秒发送请求数</span><br><span class="line">QPS（TPS）：每秒钟request/事务 数量</span><br><span class="line">RT : 响应时间</span><br><span class="line">并发用户 : vu</span><br><span class="line">HPS（Hits Per Second） ：每秒点击次数，单位是次/秒。</span><br><span class="line">TPS（Transaction per Second）：系统每秒处理交易数，单位是笔/秒。</span><br><span class="line">QPS（Query per Second）：系统每秒处理查询次数，单位是次/秒。 对于互联网业务中，如果某些业务有且仅有一个请求连接，那么TPS=QPS=HPS，一般情况下用TPS来衡量整个业务流程，用QPS来衡量接口查询次数，用HPS来表示对服务器单击请求。</span><br><span class="line"></span><br><span class="line">测试指标一般分为业务指标、资源指标、应用指标、前端指标。</span><br><span class="line">业务指标：如并发用户数、TPS（系统每秒处理事务数）、成功率、响应时间。</span><br><span class="line">资源指标：如CPU资源利用率、内存利用率、I/O、内核参数（信号量、打开文件数）等。</span><br><span class="line">应用指标：如空闲线程数、数据库连接数、GC/FULL GC次数、函数耗时等。</span><br><span class="line">前端指标：如页面加载时间、网络时间（DNS、连接时间、传输时间等）。</span><br></pre></td></tr></table></figure><h2 id="Jmeter命令行模式"><a href="#Jmeter命令行模式" class="headerlink" title="Jmeter命令行模式"></a>Jmeter命令行模式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">jmeter -n -t &lt;testplan filename&gt; -l &lt;listener filename&gt;</span><br><span class="line">示例： jmeter -n -t testplan.jmx -l test.jtl</span><br><span class="line"></span><br><span class="line">1、执行测试脚本</span><br><span class="line">jmeter -n -t JMeter分布式测试示例.jmx</span><br><span class="line">2、指定结果文件及日志路径</span><br><span class="line">jmeter -n -t JMeter分布式测试示例.jmx -l report\01-result.csv -j report\01-log.log</span><br><span class="line">3、分布式（远程）执行默认服务器列表</span><br><span class="line">jmeter -n -t JMeter分布式测试示例.jmx -r -l report\01-result.csv -j report\01-log.log</span><br><span class="line">4、分布式（远程）执行执行服务器列表</span><br><span class="line">jmeter -n -t JMeter分布式测试示例.jmx -R 10.9.215.47:1029 -l report\01-result.csv -j report\01-log.log</span><br><span class="line">5、导出图形结果</span><br><span class="line">jmeter -n -t <span class="string">"Thread Group.jmx"</span> -l 111.jtl -e -o report</span><br><span class="line"></span><br><span class="line">动态线程</span><br><span class="line"><span class="variable">$&#123;P(threadNum,)&#125;</span> 获取线程组属性</span><br><span class="line"><span class="variable">$&#123;P(cycle,)&#125;</span> 获取迭代次数属性</span><br><span class="line"><span class="variable">$&#123;__P(time,)&#125;</span> 获取时间属性</span><br><span class="line"></span><br><span class="line">jmeter -JthreadNum=10 -Jtime=10 -n -t <span class="string">"Thread Group.jmx"</span> -l 111.jtl -e -o report</span><br><span class="line"></span><br><span class="line">具体的含义如下：</span><br><span class="line">-h 帮助 -&gt; 打印出有用的信息并退出</span><br><span class="line">-n 非 GUI 模式 -&gt; 在非 GUI 模式下运行 JMeter</span><br><span class="line">-t 测试文件 -&gt; 要运行的 JMeter 测试脚本文件</span><br><span class="line">-l 日志文件 -&gt; 记录结果的文件</span><br><span class="line">-r 远程执行 -&gt; 在Jmter.properties文件中指定的所有远程服务器</span><br><span class="line">-H 代理主机 -&gt; 设置 JMeter 使用的代理主机</span><br><span class="line">-P 代理端口 -&gt; 设置 JMeter 使用的代理主机的端口号</span><br><span class="line">-e，--reportatendofloadtests 负载测试后生成报告仪表板</span><br><span class="line">-o，--reportoutputfolder &lt;参数&gt; 报告仪表板的输出文件夹</span><br><span class="line">-j，--jmeterlogfile &lt;参数&gt;jmeter运行日志文件（jmeter.log）</span><br><span class="line">-f，-forceDeleteResultFile 强制删除现有结果文件和Web报告文件夹，如果在开始测试之前</span><br><span class="line">-L，--loglevel &lt;参数&gt; = &lt;值&gt;[category =]级别，例如jorphan = INFO，jmeter.util = DEBUG或com.example.foo =警告</span><br><span class="line">-R，--remotestart &lt;参数&gt;启动这些远程服务器（覆盖remote_hosts）</span><br><span class="line">-X，--remoteexit在测试结束时退出远程服务器（非GUI）</span><br><span class="line">-g，--reportonly &lt;参数&gt;仅从测试结果文件生成报告仪表板</span><br><span class="line">-e，--reportatendofloadtests 负载测试后生成报告仪表板</span><br><span class="line">-o，--reportoutputfolder &lt;参数&gt;报告仪表板的输出文件夹</span><br></pre></td></tr></table></figure><h2 id="参数文件"><a href="#参数文件" class="headerlink" title="参数文件"></a>参数文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">关键配置说明</span><br><span class="line">jmeter.properties 配置说明主要包含以下几个方面的配置：</span><br><span class="line"></span><br><span class="line">SSL 配置：重点关注下面几个配置<span class="comment"># 指定 HTTPS 协议层　　</span></span><br><span class="line">　　　<span class="comment"># 指定 HTTPS 协议层</span></span><br><span class="line">　　　https.default.protocol=TLS</span><br><span class="line">　　　<span class="comment"># 指定 SSL 版本，实际应用中可能需要修改</span></span><br><span class="line">　　　https.default.protocol=SSLv3</span><br><span class="line">　　　<span class="comment"># 设置启动的协议</span></span><br><span class="line">　　　https.socket.protocols=SSLv2Hello SSLv3 TLSv1</span><br><span class="line">　　　<span class="comment"># 缓存控制，控制 SSL 是否可以在多个迭代中重用</span></span><br><span class="line">　　　https.use.cached.ssl.context=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line">JMeter 测试项目自动备份配置</span><br><span class="line">　　　<span class="comment"># 设置是否启用自动备份，默认是 true</span></span><br><span class="line">　　　jmeter.gui.action.save.backup_on_save=<span class="literal">true</span></span><br><span class="line">　　　<span class="comment"># 设置自动备份目录，默认备份至 JMeter 根目录的 backups下</span></span><br><span class="line">　　　jmeter.gui.action.save.backup_directory=</span><br><span class="line">　　　<span class="comment"># 设置自动备份项目数，默认为最近 10 个</span></span><br><span class="line">　　　jmeter.gui.action.save.keep_backup_max_count=10</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">日志管理配置</span><br><span class="line">　　　<span class="comment"># 设置日志格式</span></span><br><span class="line">　　　log_format_type=default</span><br><span class="line">　　　<span class="comment"># 设置日志输出级别</span></span><br><span class="line">　　　log_level.jmeter=INFO</span><br><span class="line">　　　<span class="comment"># 设置 junit 日志输出级别</span></span><br><span class="line">　　　log_level.jmeter.junit=DEBUG</span><br><span class="line">　　　<span class="comment"># 设置日志输出目标文件，默认为 jmeter.log</span></span><br><span class="line">　　　log_file=jmeter.log</span><br><span class="line"></span><br><span class="line">jmeter.bat 关键配置修改</span><br><span class="line">　　　<span class="built_in">set</span> HEAP=-Xms1g -Xmx1g -XX:MaxMetaspaceSize=256m</span><br></pre></td></tr></table></figure><h2 id="分布式"><a href="#分布式" class="headerlink" title="分布式"></a>分布式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#主控机</span></span><br><span class="line"><span class="comment">#jmeter.properties</span></span><br><span class="line"><span class="comment">#配置远程主机的 IP，默认为本机。用逗号","可以设置多个远程主机</span></span><br><span class="line">remote_hosts=127.0.0.1</span><br><span class="line"><span class="comment">#多个远程主机指定示例如下,其中:后为端口</span></span><br><span class="line">remote_hosts=127.0.0.1:1099,127.0.0.1:1200,127.0.0.1:1300</span><br><span class="line"><span class="comment">#jmeter.bat</span></span><br><span class="line"><span class="built_in">set</span> rmi_host=-Djava.rmi.server.hostname=本机 ip</span><br><span class="line"></span><br><span class="line"><span class="comment">#执行机</span></span><br><span class="line"><span class="comment">#Jmeter.properties</span></span><br><span class="line">remote_hosts=&#123;slave IP&#125;</span><br><span class="line">server.rmi.ssl.disable=<span class="literal">true</span> <span class="comment">#保证远程连接通畅</span></span><br><span class="line"><span class="comment">#开放三个默认端口</span></span><br><span class="line">server_port = 1098</span><br><span class="line">server.rmi.port=1098</span><br><span class="line">server.rmi.localport = 1098</span><br><span class="line"><span class="comment">#jmeter-server</span></span><br><span class="line">RMI_HOST_DEF=-Djava.rmi.server.hostname=&#123;slave IP&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;常用&quot;&gt;&lt;a href=&quot;#常用&quot; class=&quot;headerlink&quot; title=&quot;常用&quot;&gt;&lt;/a&gt;常用&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;./jmeter -n -t XX.jmx -l report/01-result.jtl -e -o report&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#日志文件配置&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;修改log4j2.xml文件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;在jmeter所在bin目录下修改log4j2.xml，修改方式如下：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;修改，level也可以为info,error等，一般jmter执行日志设置成debug&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="技术π" scheme="http://8oc.cc/categories/%E6%8A%80%E6%9C%AF%CF%80/"/>
    
    
      <category term="性能测试" scheme="http://8oc.cc/tags/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Fiddler教程</title>
    <link href="http://8oc.cc/2021/04/22/fiddler-learning/"/>
    <id>http://8oc.cc/2021/04/22/fiddler-learning/</id>
    <published>2021-04-22T14:26:38.000Z</published>
    <updated>2021-04-22T14:33:31.808Z</updated>
    
    <content type="html"><![CDATA[<h2 id="接口延时：delay"><a href="#接口延时：delay" class="headerlink" title="接口延时：delay"></a>接口延时：delay</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. AutoResponder 点击‘add rule’</span><br><span class="line">2. 设置延时时间 *delay:5000</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="单个断点"><a href="#单个断点" class="headerlink" title="单个断点"></a>单个断点</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. bpu在请求开始时中断</span><br><span class="line">2. bpafter在响应到达时中断</span><br><span class="line">3. bps中断HTTP响应状态为指定字符的全部session响应</span><br><span class="line">4. bpv/bpm中断指定请求方式的全部session响应</span><br></pre></td></tr></table></figure><h3 id="请求前断点（before-request-bpu"><a href="#请求前断点（before-request-bpu" class="headerlink" title="请求前断点（before request): bpu"></a>请求前断点（before request): bpu</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. 刷新请求页面：http://www.baidu.com</span><br><span class="line">2. 命令行输入：bpu 接口 例如：bpu /api/xxx</span><br><span class="line">3. 再次刷新请求页面，获取断点，可以修改任意请求参数</span><br><span class="line">4. 修改完成后点击Break On Response，Run to Completion</span><br><span class="line">5. 取消断点，在命令行输入： bpu 回车</span><br></pre></td></tr></table></figure><h3 id="响应后断点（after-response-bpafter"><a href="#响应后断点（after-response-bpafter" class="headerlink" title="响应后断点（after response): bpafter"></a>响应后断点（after response): bpafter</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. 刷新请求页面：http://www.baidu.com</span><br><span class="line">2. 命令行输入：bpafter 接口 例如：bpafter /api/xxx</span><br><span class="line">3. 再次刷新请求页面，获取断点，可以修改任意返回数据</span><br><span class="line">4. 修改完成后点击Run to Completion</span><br><span class="line">5. 取消断点，在命令行输入： bpafter 回车</span><br></pre></td></tr></table></figure><h2 id="全局断点"><a href="#全局断点" class="headerlink" title="全局断点"></a>全局断点</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fiddler菜单栏-&gt;rules-&gt;automatic Breakpoints-&gt;选择断点方式，这种方式下设定的断点会对之后的所有HTTP请求有效。有两个断点位置：</span><br><span class="line">1. before request：发送请求之后，但是Fiddler代理中转之前，这时可以修改请求的数据。</span><br><span class="line">2. after response：服务器相应之后，但是在Fiddler将响应中转给客户端之前。这时可以修改响应的结果。</span><br><span class="line">3. 消除断点：点击Rules-&gt;Automatic Breakpoint-&gt;Disabled</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;接口延时：delay&quot;&gt;&lt;a href=&quot;#接口延时：delay&quot; class=&quot;headerlink&quot; title=&quot;接口延时：delay&quot;&gt;&lt;/a&gt;接口延时：delay&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1. AutoResponder 点击‘add rule’&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2. 设置延时时间 *delay:5000&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="技术π" scheme="http://8oc.cc/categories/%E6%8A%80%E6%9C%AF%CF%80/"/>
    
    
      <category term="性能测试" scheme="http://8oc.cc/tags/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/"/>
    
      <category term="抓包" scheme="http://8oc.cc/tags/%E6%8A%93%E5%8C%85/"/>
    
  </entry>
  
  <entry>
    <title>WRK使用教程</title>
    <link href="http://8oc.cc/2021/04/22/wrk-learning/"/>
    <id>http://8oc.cc/2021/04/22/wrk-learning/</id>
    <published>2021-04-22T14:20:18.000Z</published>
    <updated>2021-04-22T14:23:08.730Z</updated>
    
    <content type="html"><![CDATA[<h2 id="格式及用法"><a href="#格式及用法" class="headerlink" title="格式及用法"></a>格式及用法</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#https://github.com/wg/wrk</span></span><br><span class="line">使用方法: wrk &lt;选项&gt; &lt;被测HTTP服务的URL&gt;           </span><br><span class="line">  Options:                                           </span><br><span class="line">    -c, --connections &lt;N&gt;  跟服务器建立并保持的TCP连接数量 </span><br><span class="line">    -d, --duration    &lt;T&gt;  压测时间          </span><br><span class="line">    -t, --threads     &lt;N&gt;  使用多少个线程进行压测，压测时，是有一个主线程来控制我们设置的n个子线程间调度  </span><br><span class="line">                                                    </span><br><span class="line">    -s, --script      &lt;S&gt;  指定Lua脚本路径      </span><br><span class="line">    -H, --header      &lt;H&gt;  为每一个HTTP请求添加HTTP头     </span><br><span class="line">        --latency          在压测结束后，打印延迟统计信息  </span><br><span class="line">        --timeout     &lt;T&gt;  超时时间    </span><br><span class="line">    -v, --version          打印正在使用的wrk的详细版本信                                              </span><br><span class="line"></span><br><span class="line">  &lt;N&gt;代表数字参数，支持国际单位 (1k, 1M, 1G)</span><br><span class="line">  &lt;T&gt;代表时间参数，支持时间单位 (2s, 2m, 2h)</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="简单压测及结果分析"><a href="#简单压测及结果分析" class="headerlink" title="简单压测及结果分析"></a>简单压测及结果分析</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">wrk -t8 -c200 -d30s --latency  http://www.bing.com</span><br><span class="line"></span><br><span class="line">Running 30s <span class="built_in">test</span> @ http://www.bing.com （压测时间30s）</span><br><span class="line"></span><br><span class="line">  8 threads and 200 connections （共8个测试线程，200个连接）</span><br><span class="line"></span><br><span class="line">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br><span class="line">              （平均值） （标准差）（最大值）（正负一个标准差所占比例）</span><br><span class="line">    Latency    46.67ms  215.38ms   1.67s    95.59%</span><br><span class="line">    （延迟）</span><br><span class="line">    Req/Sec     7.91k     1.15k   10.26k    70.77%</span><br><span class="line">    （处理中的请求数）</span><br><span class="line"></span><br><span class="line">  Latency Distribution （延迟分布）</span><br><span class="line">     50%    2.93ms</span><br><span class="line">     75%    3.78ms</span><br><span class="line">     90%    4.73ms</span><br><span class="line">     99%    1.35s （99分位的延迟：%99的请求在1.35s以内）</span><br><span class="line">  1790465 requests <span class="keyword">in</span> 30.01s, 684.08MB <span class="built_in">read</span> （30.01秒内共处理完成了1790465个请求，读取了684.08MB数据）</span><br><span class="line">Requests/sec:  59658.29 （平均每秒处理完成59658.29个请求）</span><br><span class="line">Transfer/sec:     22.79MB （平均每秒读取数据22.79MB）</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;格式及用法&quot;&gt;&lt;a href=&quot;#格式及用法&quot; class=&quot;headerlink&quot; title=&quot;格式及用法&quot;&gt;&lt;/a&gt;格式及用法&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#https://github.com/wg/wrk&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;使用方法: wrk &amp;lt;选项&amp;gt; &amp;lt;被测HTTP服务的URL&amp;gt;           &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Options:                                           &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    -c, --connections &amp;lt;N&amp;gt;  跟服务器建立并保持的TCP连接数量 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    -d, --duration    &amp;lt;T&amp;gt;  压测时间          &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    -t, --threads     &amp;lt;N&amp;gt;  使用多少个线程进行压测，压测时，是有一个主线程来控制我们设置的n个子线程间调度  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    -s, --script      &amp;lt;S&amp;gt;  指定Lua脚本路径      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    -H, --header      &amp;lt;H&amp;gt;  为每一个HTTP请求添加HTTP头     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        --latency          在压测结束后，打印延迟统计信息  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        --timeout     &amp;lt;T&amp;gt;  超时时间    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    -v, --version          打印正在使用的wrk的详细版本信                                              &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;lt;N&amp;gt;代表数字参数，支持国际单位 (1k, 1M, 1G)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;lt;T&amp;gt;代表时间参数，支持时间单位 (2s, 2m, 2h)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="技术π" scheme="http://8oc.cc/categories/%E6%8A%80%E6%9C%AF%CF%80/"/>
    
    
      <category term="性能测试" scheme="http://8oc.cc/tags/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>ApacheBench使用教程</title>
    <link href="http://8oc.cc/2021/04/22/apache-apachebench-learning/"/>
    <id>http://8oc.cc/2021/04/22/apache-apachebench-learning/</id>
    <published>2021-04-22T14:12:46.000Z</published>
    <updated>2021-04-22T14:22:13.973Z</updated>
    
    <content type="html"><![CDATA[<h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 模拟1个客户端请求100次：</span></span><br><span class="line">$ ab -n 100 http://www.example.com/</span><br><span class="line"><span class="comment"># 模拟100个客户端请求10000次</span></span><br><span class="line">$ ab -n 10000 -c 100 http://www.example.com/</span><br><span class="line"><span class="comment"># 调用POST方法的接口10次，传输的数据格式为JSON</span></span><br><span class="line">$ ab -n 10 -p json-file http://www.example.com/</span><br><span class="line"><span class="comment"># 调用OPTIONS方法的接口10次</span></span><br><span class="line">$ ab -n 10 -m OPTIONS http://www.example.com/</span><br><span class="line"><span class="comment"># 输出每次请求的返回信息</span></span><br><span class="line">$ ab -n 10 -v 2 http://www.example.com/</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="基础使用"><a href="#基础使用" class="headerlink" title="基础使用"></a>基础使用</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">Usage: ab [options] [http[s]://]hostname[:port]/path</span><br><span class="line">用法：ab [选项] 地址</span><br><span class="line">选项：</span><br><span class="line">Options are:</span><br><span class="line">    -n requests         <span class="comment">#执行的请求数，即一共发起多少请求。</span></span><br><span class="line">    -c concurrency      <span class="comment">#请求并发数。</span></span><br><span class="line">    -t timelimit        <span class="comment">#测试所进行的最大秒数。其内部隐含值是-n 50000，它可以使对服务器的测试限制在一个固定的总时间以内。默认时，没有时间限制。</span></span><br><span class="line">    -s timeout          <span class="comment">#指定每个请求的超时时间，默认是30秒。</span></span><br><span class="line">    -b windowsize       <span class="comment">#指定tcp窗口的大小，单位是字节。</span></span><br><span class="line">    -B address          <span class="comment">#指定在发起连接时绑定的ip地址是什么。</span></span><br><span class="line">    -p postfile         <span class="comment">#指定要POST的文件，同时要设置-T参数。</span></span><br><span class="line">    -u putfile          <span class="comment">#指定要PUT的文件，同时要设置-T参数。</span></span><br><span class="line">    -T content-type     <span class="comment">#指定使用POST或PUT上传文本时的文本类型，默认是'text/plain'。</span></span><br><span class="line">    -v verbosity        <span class="comment">#设置详细模式等级。</span></span><br><span class="line">    -w                  <span class="comment">#将结果输出到html的表中。</span></span><br><span class="line">    -i                  <span class="comment">#使用HEAD方式代替GET发起请求。</span></span><br><span class="line">    -y attributes       <span class="comment">#以表格方式输出时，设置html表格tr属性。 </span></span><br><span class="line">    -z attributes       <span class="comment">#以表格方式输出时，设置html表格th或td属性。</span></span><br><span class="line">    -C attribute        <span class="comment">#添加cookie,比如'Apache=1234'。（可重复）</span></span><br><span class="line">    -H attribute        <span class="comment">#为请求追加一个额外的头部，比如'Accept-Encoding: gzip'。（可重复）</span></span><br><span class="line">    -A attribute        <span class="comment">#对服务器提供BASIC认证信任。用户名和密码由一个:隔开，并以base64编码形式发送。无论服务器是否需要(即,是否发送了401认证需求代码)，此字符串都会被发送。</span></span><br><span class="line">    -P attribute        <span class="comment">#对一个中转代理提供BASIC认证信任。用户名和密码由一个:隔开，并以base64编码形式发送。无论服务器是否需要(即, 是否发送了401认证需求代码)，此字符串都会被发送。</span></span><br><span class="line">    -X proxy:port       <span class="comment">#指定代理服务器的IP和端口。</span></span><br><span class="line">    -V                  <span class="comment">#打印版本信息。</span></span><br><span class="line">    -k                  <span class="comment">#启用HTTP KeepAlive功能，即在一个HTTP会话中执行多个请求。默认时，不启用KeepAlive功能。</span></span><br><span class="line">    -d                  <span class="comment">#不显示"percentage served within XX [ms] table"的消息(为以前的版本提供支持)。</span></span><br><span class="line">    -q                  <span class="comment">#如果处理的请求数大于150，ab每处理大约10%或者100个请求时，会在stderr输出一个进度计数。此-q标记可以抑制这些信息。</span></span><br><span class="line">    -g filename         <span class="comment">#把所有测试结果写入一个'gnuplot'或者TSV(以Tab分隔的)文件。此文件可以方便地导入到Gnuplot,IDL,Mathematica,Igor甚至Excel中。其中的第一行为标题。</span></span><br><span class="line">    -e filename         <span class="comment">#产生一个以逗号分隔的(CSV)文件，其中包含了处理每个相应百分比的请求所需要(从1%到100%)的相应百分比的(以微妙为单位)时间。由于这种格式已经“二进制化”，所以比'gnuplot'格式更有用。</span></span><br><span class="line">    -r                  <span class="comment">#当收到错误时不要退出。</span></span><br><span class="line">    -h                  <span class="comment">#输出帮助信息</span></span><br><span class="line">    -Z ciphersuite      <span class="comment">#指定SSL/TLS密码套件</span></span><br><span class="line">    -f protocol         <span class="comment">#指定SSL/TLS协议(SSL3, TLS1, TLS1.1, TLS1.2 or ALL)</span></span><br></pre></td></tr></table></figure><h2 id="模拟压测某个网站首页"><a href="#模拟压测某个网站首页" class="headerlink" title="模拟压测某个网站首页"></a>模拟压测某个网站首页</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># ab -n 500 -c 10 http://gitee.com/</span></span><br><span class="line">This is ApacheBench, Version 2.3 &lt;<span class="variable">$Revision</span>: 1430300 $&gt;</span><br><span class="line">Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/</span><br><span class="line">Licensed to The Apache Software Foundation, http://www.apache.org/</span><br><span class="line"></span><br><span class="line">Benchmarking gitee.com (be patient)</span><br><span class="line">Completed 100 requests</span><br><span class="line">Completed 200 requests</span><br><span class="line">Completed 300 requests</span><br><span class="line">Completed 400 requests</span><br><span class="line">Completed 500 requests</span><br><span class="line">Finished 500 requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Server Software:        nginx           <span class="comment"># 平台前端服务器类型</span></span><br><span class="line">Server Hostname:        gitee.com       <span class="comment"># 服务器主机名</span></span><br><span class="line">Server Port:            80              <span class="comment"># 服务器端口</span></span><br><span class="line"></span><br><span class="line">Document Path:          /               <span class="comment"># 访问的路径</span></span><br><span class="line">Document Length:        178 bytes       <span class="comment"># 返回数据大小</span></span><br><span class="line"></span><br><span class="line">Concurrency Level:      10              <span class="comment"># 并发数</span></span><br><span class="line">Time taken <span class="keyword">for</span> tests:   3.898 seconds   <span class="comment"># 整个测试持续的时间</span></span><br><span class="line">Complete requests:      500             <span class="comment"># 完成的请求数量</span></span><br><span class="line">Failed requests:        0               <span class="comment"># 表示失败的请求数，这里的失败是指请求的连接服务器、发送数据、接收数据等环节发生异常，以及无响应后超时的情况。对于超时时间的设置可以用ab的-t参数。而如果接受到的http响应数据的头信息中含有2xx以外的状态码，则会在测试结果显示另一个名为“Non-2xx responses”的统计项，用于统计这部分请求数，这些请求并不算是失败的请求</span></span><br><span class="line">Write errors:           0               <span class="comment"># 输出错误数量</span></span><br><span class="line">Non-2xx responses:      500             <span class="comment"># </span></span><br><span class="line">Total transferred:      217500 bytes    <span class="comment"># 整个场景中的网络传输量，表示所有请求的响应数据长度总和，包括每个http响应数据的头信息和正文数据的长度。注意这里不包括http请求数据的长度，所以Total transferred代表了从Web服务器流向用户PC的应用层数据总长度。通过使用ab的-v参数即可查看详细的http头信息</span></span><br><span class="line">HTML transferred:       89000 bytes     <span class="comment"># 整个场景中的HTML内容传输量，表示所有请求的响应数据中正文数据的总和，也就是减去了Total transferred中http响应数据中头信息的长度</span></span><br><span class="line">Requests per second:    128.26 [<span class="comment">#/sec] (mean) # 每秒钟平均处理的请求数（相当于 LR 中的 每秒事务数）这便是我们重点关注的吞吐率，它等于：Complete requests / Time taken for tests</span></span><br><span class="line">Time per request:       77.964 [ms] (mean)  <span class="comment"># 每次并发请求时间（当前并发10）</span></span><br><span class="line">Time per request:       7.796 [ms] (mean, across all concurrent requests) <span class="comment"># 平均每个请求处理时间，所有并发的请求加一起</span></span><br><span class="line">Transfer rate:          54.49 [Kbytes/sec] received <span class="comment"># 平均每秒网络流量</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 花费在连接Connect，处理Processing，等待Waiting的时间的最小min，平均值mean，标准差[+/-sd]，中值median，最大表max的一个表。</span></span><br><span class="line"></span><br><span class="line">Connection Times (ms)</span><br><span class="line">              min  mean[+/-sd] median   max</span><br><span class="line">Connect:       23   27   1.3     27      30     <span class="comment"># 连接</span></span><br><span class="line">Processing:    36   49   7.8     50     155     <span class="comment"># 处理</span></span><br><span class="line">Waiting:       35   48   7.8     50     154     <span class="comment"># 等待</span></span><br><span class="line">Total:         61   75   8.0     76     180     <span class="comment"># 总量</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在一定比例的请求服务时间</span></span><br><span class="line">Percentage of the requests served within a certain time (ms)</span><br><span class="line">  50%     76        <span class="comment"># 50%的用户响应时间小于76毫秒</span></span><br><span class="line">  66%     79        <span class="comment"># 66%的用户响应时间小于79毫秒</span></span><br><span class="line">  75%     80        <span class="comment"># 以此类推...</span></span><br><span class="line">  80%     81</span><br><span class="line">  90%     83</span><br><span class="line">  95%     85</span><br><span class="line">  98%     87</span><br><span class="line">  99%     89</span><br><span class="line"> 100%    180 (longest request)</span><br></pre></td></tr></table></figure><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.使用-H Content-Type 不能代替-T Content-Type指定Content-Type 头部</span><br><span class="line">2.如果提示ab: invalid URL，可能是URL最右边缺少/，例如http://www.example.com需要改为http://www.example.com/。</span><br><span class="line">3.需要注意如果压测的HTTP接口是通过返回结果判断是否成功（只要能响应都会返回200状态码），则需要自行去想办法识别失败的请求</span><br><span class="line">4.ab属于一个轻量级的压测工具，结果不会特别准确，可以用作参考。</span><br><span class="line">追求准确的话，推荐使用jmeter或者LoadRunner。</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;例子&quot;&gt;&lt;a href=&quot;#例子&quot; class=&quot;headerlink&quot; title=&quot;例子&quot;&gt;&lt;/a&gt;例子&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 模拟1个客户端请求100次：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ab -n 100 http://www.example.com/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 模拟100个客户端请求10000次&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ab -n 10000 -c 100 http://www.example.com/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 调用POST方法的接口10次，传输的数据格式为JSON&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ab -n 10 -p json-file http://www.example.com/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 调用OPTIONS方法的接口10次&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ab -n 10 -m OPTIONS http://www.example.com/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 输出每次请求的返回信息&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ab -n 10 -v 2 http://www.example.com/&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="技术π" scheme="http://8oc.cc/categories/%E6%8A%80%E6%9C%AF%CF%80/"/>
    
    
      <category term="性能测试" scheme="http://8oc.cc/tags/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/"/>
    
      <category term="Apache" scheme="http://8oc.cc/tags/Apache/"/>
    
  </entry>
  
  <entry>
    <title>MacBook常用操作</title>
    <link href="http://8oc.cc/2020/09/26/macbook-set/"/>
    <id>http://8oc.cc/2020/09/26/macbook-set/</id>
    <published>2020-09-26T13:02:08.000Z</published>
    <updated>2021-04-22T14:08:11.546Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Brew"><a href="#Brew" class="headerlink" title="Brew"></a>Brew</h2><h3 id="命令行"><a href="#命令行" class="headerlink" title="命令行"></a>命令行</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">brew –<span class="built_in">help</span> <span class="comment">#查看brew的帮助</span></span><br><span class="line">brew install git <span class="comment">#安装git软件</span></span><br><span class="line">brew uninstall git <span class="comment">#卸载git软件</span></span><br><span class="line">brew search git <span class="comment">#搜索git软件</span></span><br><span class="line">brew list <span class="comment">#显示已经安装软件列表</span></span><br><span class="line">brew update <span class="comment">#更新软件</span></span><br><span class="line">brew upgrade git      <span class="comment">#更新某具体软件</span></span><br><span class="line">brew [info | home] [FORMULA…] <span class="comment">#查看软件信息</span></span><br><span class="line">brew cleanup git <span class="comment">#单个软件删除，和upgrade一样</span></span><br><span class="line">brew cleanup <span class="comment">#删除所有</span></span><br><span class="line">brew outdated <span class="comment">#查看那些已安装的程序需要更新</span></span><br><span class="line">brew home  * <span class="comment">#用浏览器打开</span></span><br><span class="line">brew info * <span class="comment">#显示软件内容信息</span></span><br><span class="line">brew deps * <span class="comment">#显示包依赖</span></span><br><span class="line">brew config <span class="comment">#查看brew配置</span></span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装Brew</span></span><br><span class="line">ruby -e <span class="string">"<span class="variable">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>"</span></span><br><span class="line"><span class="comment">#更换源</span></span><br><span class="line">git -C <span class="string">"<span class="variable">$(brew --repo)</span>"</span> remote <span class="built_in">set</span>-url origin https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/brew.git</span><br><span class="line">git -C <span class="string">"<span class="variable">$(brew --repo homebrew/core)</span>"</span> remote <span class="built_in">set</span>-url origin https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-core.git</span><br><span class="line">git -C <span class="string">"<span class="variable">$(brew --repo homebrew/cask)</span>"</span> remote <span class="built_in">set</span>-url origin https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-cask.git</span><br></pre></td></tr></table></figure><h2 id="Quicklook插件"><a href="#Quicklook插件" class="headerlink" title="Quicklook插件"></a>Quicklook插件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">brew cask install qlstephen <span class="comment">#查看没有文件扩展名的纯文本文件</span></span><br><span class="line">brew cask install provisionql <span class="comment">#预览iOS的.ipa安装包</span></span><br><span class="line">brew cask install qlmarkdown <span class="comment">#预览Markdown文件</span></span><br><span class="line">brew cask install quicklook-json <span class="comment">#预览json文件</span></span><br></pre></td></tr></table></figure><h2 id="ITerm2"><a href="#ITerm2" class="headerlink" title="ITerm2"></a>ITerm2</h2><h3 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 终端输入命令，然后输入密码即可将zsh切换成默认shell</span></span><br><span class="line">$ chsh -s /bin/zsh</span><br><span class="line"><span class="comment"># 安装oh-my-zsh</span></span><br><span class="line">sh -c <span class="string">"<span class="variable">$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)</span>"</span></span><br><span class="line"><span class="comment"># 插件</span></span><br><span class="line">git <span class="built_in">clone</span> git://github.com/zsh-users/zsh-autosuggestions <span class="variable">$ZSH_CUSTOM</span>/plugins/zsh-autosuggestions</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-syntax-highlighting.git <span class="variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span>/plugins/zsh-syntax-highlighting</span><br><span class="line"><span class="comment"># 刷新</span></span><br><span class="line"><span class="built_in">source</span> ~/.zshrc</span><br><span class="line"><span class="comment"># 配置</span></span><br><span class="line">$ zshconfig</span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">source $ZSH/oh-my-zsh.sh</span></span><br><span class="line"><span class="string">alias zshconfig="vim ~/.zshrc"</span></span><br><span class="line"><span class="string">alias vimconfig="vim ~/.vimrc"</span></span><br><span class="line"><span class="string">alias ansibleconfig="vim ~/.ansible/ansible.cfg"</span></span><br><span class="line"><span class="string">alias grep='</span>grep --color=auto<span class="string">'</span></span><br><span class="line"><span class="string">alias cls="clear"</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="comment">#主题使用powerlevel10k</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">POWERLEVEL9K_MODE='</span>nerdfont-complete<span class="string">'</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ZSH_THEME="powerlevel10k/powerlevel10k"</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="comment">#使用颜色配置</span></span><br><span class="line">$ vi ~/.vimrc</span><br><span class="line">syntax <span class="built_in">enable</span></span><br><span class="line"><span class="built_in">set</span> background=dark</span><br><span class="line">colorscheme solarized.vim</span><br></pre></td></tr></table></figure><h3 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h3><blockquote><h4 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h4><blockquote><p>新建标签：command + t<br>关闭标签：command + w<br>切换标签：command + 数字 / command + 左右方向键<br>切换全屏：command + enter<br>查找：command + f</p></blockquote><h4 id="分屏"><a href="#分屏" class="headerlink" title="分屏"></a>分屏</h4><blockquote><p>垂直分屏：command + d<br>水平分屏：command + shift + d<br>切换屏幕：command + option + 方向键 command + [ 或 command + ]<br>查看历史命令：command + ;<br>查看剪贴板历史：command + shift + h</p></blockquote><h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><blockquote><p>清除当前行：ctrl + u<br>到行首：ctrl + a<br>到行尾：ctrl + e<br>前进后退：ctrl + f/b (相当于左右方向键)<br>上一条命令：ctrl + p<br>搜索命令历史：ctrl + r<br>删除当前光标的字符：ctrl + d<br>删除光标之前的字符：ctrl + h<br>删除光标之前的单词：ctrl + w<br>删除到文本末尾：ctrl + k<br>交换光标处文本：ctrl + t<br>清屏1：command + r<br>清屏2：ctrl + l</p></blockquote></blockquote><h3 id="Python安装"><a href="#Python安装" class="headerlink" title="Python安装"></a>Python安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装Python</span></span><br><span class="line">brew search python</span><br><span class="line">brew install python@3.8</span><br><span class="line"><span class="comment">#检测文件夹</span></span><br><span class="line">open /usr/<span class="built_in">local</span>/Frameworks</span><br><span class="line"><span class="comment">#没有的话执行 sudo mkdir /usr/local/Frameworks</span></span><br><span class="line"><span class="comment">#设置权限sudo chown $(whoami):admin /usr/local/Frameworks</span></span><br><span class="line"><span class="comment">#修改默认指向</span></span><br><span class="line"><span class="built_in">alias</span> python=<span class="string">"/usr/bin/python3.7"</span></span><br><span class="line"><span class="built_in">source</span> ~/.bash_profile</span><br><span class="line"><span class="comment">#查看版本</span></span><br><span class="line">python -V</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Brew&quot;&gt;&lt;a href=&quot;#Brew&quot; class=&quot;headerlink&quot; title=&quot;Brew&quot;&gt;&lt;/a&gt;Brew&lt;/h2&gt;&lt;h3 id=&quot;命令行&quot;&gt;&lt;a href=&quot;#命令行&quot; class=&quot;headerlink&quot; title=&quot;命令行&quot;&gt;&lt;/a&gt;命令行&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;brew –&lt;span class=&quot;built_in&quot;&gt;help&lt;/span&gt; 			&lt;span class=&quot;comment&quot;&gt;#查看brew的帮助&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;brew install git 		&lt;span class=&quot;comment&quot;&gt;#安装git软件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;brew uninstall git 		&lt;span class=&quot;comment&quot;&gt;#卸载git软件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;brew search git 		&lt;span class=&quot;comment&quot;&gt;#搜索git软件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;brew list 			&lt;span class=&quot;comment&quot;&gt;#显示已经安装软件列表&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;brew update 			&lt;span class=&quot;comment&quot;&gt;#更新软件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;brew upgrade git      		&lt;span class=&quot;comment&quot;&gt;#更新某具体软件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;brew [info | home] [FORMULA…] 	&lt;span class=&quot;comment&quot;&gt;#查看软件信息&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;brew cleanup git 		&lt;span class=&quot;comment&quot;&gt;#单个软件删除，和upgrade一样&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;brew cleanup 			&lt;span class=&quot;comment&quot;&gt;#删除所有&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;brew outdated 			&lt;span class=&quot;comment&quot;&gt;#查看那些已安装的程序需要更新&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;brew home  * 			&lt;span class=&quot;comment&quot;&gt;#用浏览器打开&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;brew info * 			&lt;span class=&quot;comment&quot;&gt;#显示软件内容信息&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;brew deps * 			&lt;span class=&quot;comment&quot;&gt;#显示包依赖&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;brew config 			&lt;span class=&quot;comment&quot;&gt;#查看brew配置&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="技术π" scheme="http://8oc.cc/categories/%E6%8A%80%E6%9C%AF%CF%80/"/>
    
    
      <category term="MacBook" scheme="http://8oc.cc/tags/MacBook/"/>
    
  </entry>
  
  <entry>
    <title>Windows</title>
    <link href="http://8oc.cc/2020/09/26/win10-error/"/>
    <id>http://8oc.cc/2020/09/26/win10-error/</id>
    <published>2020-09-26T07:43:02.000Z</published>
    <updated>2021-06-16T12:40:55.230Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Win10远程连接错误"><a href="#Win10远程连接错误" class="headerlink" title="Win10远程连接错误"></a>Win10远程连接错误</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Windows10远程报错:由于CredSSP加密Oracle修正</span></span><br><span class="line">1.打开注册表，快捷输⼊ “regedit”;</span><br><span class="line">2.找⽂件夹 路径：HKLM(缩写)\Software\Microsoft\Windows\CurrentVersion</span><br><span class="line">\Policies\System\CredSSP\Parameters,⼤概到System 后就没有了⾃⼰创建⽂件夹就好;</span><br><span class="line">3.然后再最底部⽂件夹⾥⾯ 新建 DWORD（32）位的。⽂件名 “AllowEncryptionOracle”，值：2，保存。</span><br></pre></td></tr></table></figure><h2 id="MD5"><a href="#MD5" class="headerlink" title="MD5"></a>MD5</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">win自带MD5校验</span><br><span class="line">win / CertUtil -hashfile 文件路径 [算法] MD5</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Win10远程连接错误&quot;&gt;&lt;a href=&quot;#Win10远程连接错误&quot; class=&quot;headerlink&quot; title=&quot;Win10远程连接错误&quot;&gt;&lt;/a&gt;Win10远程连接错误&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table
      
    
    </summary>
    
      <category term="技术π" scheme="http://8oc.cc/categories/%E6%8A%80%E6%9C%AF%CF%80/"/>
    
    
      <category term="Win" scheme="http://8oc.cc/tags/Win/"/>
    
  </entry>
  
  <entry>
    <title>Chrome快捷键</title>
    <link href="http://8oc.cc/2020/09/26/chrome-hotkey/"/>
    <id>http://8oc.cc/2020/09/26/chrome-hotkey/</id>
    <published>2020-09-26T07:30:36.000Z</published>
    <updated>2020-09-26T07:41:04.502Z</updated>
    
    <content type="html"><![CDATA[<h2 id="标签页和窗口快捷键"><a href="#标签页和窗口快捷键" class="headerlink" title="标签页和窗口快捷键"></a>标签页和窗口快捷键</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Ctrl+n <span class="comment">#打开新窗口</span></span><br><span class="line">Ctrl+t <span class="comment">#打开新的标签页，并跳转到该标签页</span></span><br><span class="line">Ctrl+Shift+t <span class="comment">#重新打开最后关闭的标签页，并跳转到该标签页</span></span><br><span class="line">Ctrl+Tab <span class="comment">#跳转到下一个打开的标签页</span></span><br><span class="line">Ctrl+Shift+Tab <span class="comment">#跳转到上一个打开的标签页</span></span><br><span class="line">Alt+← <span class="comment">#历史记录上一页</span></span><br><span class="line">Alt+→ <span class="comment">#历史记录下一页</span></span><br><span class="line">Ctrl+w <span class="comment">#关闭当前标签页</span></span><br><span class="line">Ctrl+1 到 Ctrl+8跳转到特定标签页，Ctrl+9跳转到最后一个标签页</span><br><span class="line">Alt+Home <span class="comment">#在当前标签页中打开主页</span></span><br><span class="line">Ctrl+Shift+w <span class="comment">#关闭所有打开的标签页和浏览器</span></span><br><span class="line">Ctrl+Shift+q <span class="comment">#退出Chrome浏览器</span></span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="功能快捷键"><a href="#功能快捷键" class="headerlink" title="功能快捷键"></a>功能快捷键</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Ctrl+Shift+b  <span class="comment">#显示或隐藏书签栏</span></span><br><span class="line">Ctrl+h  <span class="comment">#在新标签页中打开”历史记录”页</span></span><br><span class="line">Ctrl+j  <span class="comment">#在新标签页中打开”下载内容”页</span></span><br><span class="line">Shift+Esc  <span class="comment">#打开 Chrome 任务管理器</span></span><br><span class="line">Ctrl+g  <span class="comment">#跳转到与查找栏中搜索字词相匹配的下一条内容</span></span><br><span class="line">Ctrl+Shift+g  <span class="comment">#跳转到与查找栏中搜索字词相匹配的上一条内容</span></span><br></pre></td></tr></table></figure><h2 id="地址栏快捷键"><a href="#地址栏快捷键" class="headerlink" title="地址栏快捷键"></a>地址栏快捷键</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Ctrl+k 或 Ctrl+e 从页面中的任意位置搜索</span><br><span class="line">输入搜索字词并按 Alt+Enter 键打开新的标签页并执行 Google搜索</span><br><span class="line">Ctrl+l、Alt+d 或 F6 跳转到地址栏</span><br></pre></td></tr></table></figure><h2 id="网页快捷键"><a href="#网页快捷键" class="headerlink" title="网页快捷键"></a>网页快捷键</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Ctrl+u <span class="comment">#显示当前网页的 HTML 源代码</span></span><br><span class="line">Ctrl+d <span class="comment">#将当前网页保存为书签</span></span><br><span class="line">Ctrl+Shift+d <span class="comment">#将所有打开的标签页以书签的形式保存在新文件夹中</span></span><br><span class="line">空格键或 PgDn <span class="comment">#向下滚动网页，一次一个屏幕</span></span><br><span class="line">Shift+空格或PgUp <span class="comment">#向上滚动网页，一次一个屏幕</span></span><br><span class="line">Ctrl 和+ <span class="comment">#放大网页上的所有内容</span></span><br><span class="line">Ctrl 和 - <span class="comment">#缩小网页上的所有内容</span></span><br><span class="line">Ctrl+0 <span class="comment">#将网页上的所有内容恢复到默认大小</span></span><br><span class="line">Ctrl+Shift+d <span class="comment">#将所有打开的标签页以书签的形式保存在新文件夹中</span></span><br><span class="line">Esc <span class="comment">#停止加载网页</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;标签页和窗口快捷键&quot;&gt;&lt;a href=&quot;#标签页和窗口快捷键&quot; class=&quot;headerlink&quot; title=&quot;标签页和窗口快捷键&quot;&gt;&lt;/a&gt;标签页和窗口快捷键&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Ctrl+n 		&lt;span class=&quot;comment&quot;&gt;#打开新窗口&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ctrl+t 		&lt;span class=&quot;comment&quot;&gt;#打开新的标签页，并跳转到该标签页&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ctrl+Shift+t 	&lt;span class=&quot;comment&quot;&gt;#重新打开最后关闭的标签页，并跳转到该标签页&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ctrl+Tab 	&lt;span class=&quot;comment&quot;&gt;#跳转到下一个打开的标签页&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ctrl+Shift+Tab 	&lt;span class=&quot;comment&quot;&gt;#跳转到上一个打开的标签页&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Alt+← 		&lt;span class=&quot;comment&quot;&gt;#历史记录上一页&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Alt+→ 		&lt;span class=&quot;comment&quot;&gt;#历史记录下一页&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ctrl+w 		&lt;span class=&quot;comment&quot;&gt;#关闭当前标签页&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ctrl+1 到 Ctrl+8跳转到特定标签页，Ctrl+9跳转到最后一个标签页&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Alt+Home 	&lt;span class=&quot;comment&quot;&gt;#在当前标签页中打开主页&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ctrl+Shift+w 	&lt;span class=&quot;comment&quot;&gt;#关闭所有打开的标签页和浏览器&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ctrl+Shift+q 	&lt;span class=&quot;comment&quot;&gt;#退出Chrome浏览器&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="技术π" scheme="http://8oc.cc/categories/%E6%8A%80%E6%9C%AF%CF%80/"/>
    
    
      <category term="Chrome" scheme="http://8oc.cc/tags/Chrome/"/>
    
      <category term="Google" scheme="http://8oc.cc/tags/Google/"/>
    
  </entry>
  
  <entry>
    <title>Solr安装手册</title>
    <link href="http://8oc.cc/2020/09/26/solr-set/"/>
    <id>http://8oc.cc/2020/09/26/solr-set/</id>
    <published>2020-09-26T07:19:17.000Z</published>
    <updated>2020-09-27T01:09:46.888Z</updated>
    
    <content type="html"><![CDATA[<h2 id="单机版"><a href="#单机版" class="headerlink" title="单机版"></a>单机版</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1、安装linux、jdk、tomcat</span></span><br><span class="line">mkdir /usr/<span class="built_in">local</span>/solr</span><br><span class="line">mkdir /usr/<span class="built_in">local</span>/solr/solrhome</span><br><span class="line">cp -r apache-tomcat-7.0.47 /usr/<span class="built_in">local</span>/solr/tomcat</span><br><span class="line"><span class="comment">#2、把solr的压缩包上传到服务器,并解压</span></span><br><span class="line">tar -zxvf solr-4.10.3.tgz.tgz</span><br><span class="line"><span class="comment">#3、把/root/solr-4.10.3/dist/solr-4.10.3.war包部署到tomcat下。并改名为solr.war</span></span><br><span class="line">cp /root/solr-4.10.3/dist/solr-4.10.3.war /usr/<span class="built_in">local</span>/solr/tomcat/webapps/solr.war</span><br><span class="line"><span class="comment">#4、解压war包。启动tomcat⾃动解压。关闭tomcat。删除solr.war</span></span><br><span class="line">tomcat/bin/stratup.sh</span><br><span class="line"><span class="comment">#5、log相关jar把复制到lib⽬录，/root/solr-4.10.3/example/lib/ext</span></span><br><span class="line">cp /root/solr-4.10.3/example/lib/ext/* /usr/<span class="built_in">local</span>/solr/tomcat/webapps/WEB-INF/lib/</span><br><span class="line"><span class="comment">#6、Solrhome是存放solr服务器所有配置⽂件的⽬录。在solr-4.10.3/example/solr下</span></span><br><span class="line">cp -r solr /usr/<span class="built_in">local</span>/solr/solrhome</span><br><span class="line"><span class="comment">#7、配置tomcat的web.xml，告诉solr服务器solrhome的位置。</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">&lt;env-entry&gt;</span></span><br><span class="line"><span class="string">&lt;env-entry-name&gt;solr/home&lt;/env-entry-name&gt;</span></span><br><span class="line"><span class="string">&lt;env-entry-value&gt;/usr/local/solr/solrhome&lt;/env-entry-value&gt;</span></span><br><span class="line"><span class="string">&lt;env-entry-type&gt;java.lang.String&lt;/env-entry-type&gt;</span></span><br><span class="line"><span class="string">&lt;/env-entry&gt;</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="comment">#8、启动tomcat，登⼊地址 http://192.168.7.13x:8080/solr</span></span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="添加分词器"><a href="#添加分词器" class="headerlink" title="添加分词器"></a>添加分词器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1、上传IK Analyzer 2012FF_hf1⽂件</span></span><br><span class="line"><span class="comment">#2、需要把分析器的IKAnalyzer2012FF_u1.jar包添加到solr⼯程中</span></span><br><span class="line">cp IKAnalyzer2012FF_u1.jar /usr/<span class="built_in">local</span>/solr/tomcat/webapps/solr/WEB-INF/lib/</span><br><span class="line"><span class="comment">#3、需要把IKAnalyzer需要的扩展词典及停⽤词词典、配置⽂件复制到solr⼯程的classpath</span></span><br><span class="line">cp IKAnalyzer.cfg.xml ext_stopword.dic mydict.dic /usr/<span class="built_in">local</span>/solr</span><br><span class="line">/tomcat/webapps/solr/WEB-INF/classes</span><br><span class="line"><span class="string">'注意：扩展词典及停⽤词词典的字符集必须是utf-8。不能使⽤windows记事本编辑。'</span></span><br><span class="line"><span class="comment">#4、配置fieldType。需要在solrhome/collection1/conf/schema.xml中配置。</span></span><br><span class="line"><span class="string">'技巧：使⽤vi、vim跳转到⽂档开头gg。跳转到⽂档末尾：G'</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">&lt;fieldType name="text_ik" class="solr.TextField"&gt;</span></span><br><span class="line"><span class="string">&lt;analyzer class="org.wltea.analyzer.lucene.IKAnalyzer"/&gt;</span></span><br><span class="line"><span class="string">&lt;/fieldType&gt;</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="comment">#业务字段配置</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">&lt;field name="item_title" type="text_ik" indexed="true" stored="true"/&gt;</span></span><br><span class="line"><span class="string">&lt;field name="item_sell_point" type="text_ik" indexed="true" stored="true"/&gt;</span></span><br><span class="line"><span class="string">&lt;field name="item_price" type="long" indexed="true" stored="true"/&gt;</span></span><br><span class="line"><span class="string">&lt;field name="item_image" type="string" indexed="false" stored="true" /&gt;</span></span><br><span class="line"><span class="string">&lt;field name="item_category_name" type="string" indexed="true" stored="true" /&gt;</span></span><br><span class="line"><span class="string">&lt;field name="item_desc" type="text_ik" indexed="true" stored="false" /&gt;</span></span><br><span class="line"><span class="string">&lt;field name="item_keywords" type="text_ik" indexed="true" stored=</span></span><br><span class="line"><span class="string">"false" multiValued="true"/&gt;</span></span><br><span class="line"><span class="string">&lt;copyField source="item_title" dest="item_keywords"/&gt;</span></span><br><span class="line"><span class="string">&lt;copyField source="item_sell_point" dest="item_keywords"/&gt;</span></span><br><span class="line"><span class="string">&lt;copyField source="item_category_name" dest="item_keywords"/&gt;</span></span><br><span class="line"><span class="string">&lt;copyField source="item_desc" dest="item_keywords"/&gt;</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="comment">#5、重启tomcat</span></span><br></pre></td></tr></table></figure><h2 id="SolrCloud集群版"><a href="#SolrCloud集群版" class="headerlink" title="SolrCloud集群版"></a>SolrCloud集群版</h2><h3 id="Zookeeper集群的搭建"><a href="#Zookeeper集群的搭建" class="headerlink" title="Zookeeper集群的搭建"></a>Zookeeper集群的搭建</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#需要三个zookeeper节点，四个solr节点</span></span><br><span class="line"><span class="comment">#上传、安装zookeeper</span></span><br><span class="line">tar -zxf zookeeper-3.4.6.tar.gz</span><br><span class="line"><span class="comment">#在/usr/local/⽬录下创建⼀个solrcloud⽬录。把zookeeper解压后的⽂件夹复制</span></span><br><span class="line"><span class="comment">#到此⽬录下三份。分别命名为zookeeper1、2、3</span></span><br><span class="line">mkdir /usr/<span class="built_in">local</span>/solrcloud</span><br><span class="line">mv zookeeper-3.4.6 /usr/<span class="built_in">local</span>/solrcloud/zookeeper1</span><br><span class="line"><span class="comment">#配置zookeeper</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">1、在每个zookeeper⽂件夹下创建⼀个data⽬录mkdir zookeeper/data</span></span><br><span class="line"><span class="string">2、在data⽂件夹下创建⼀个⽂件名称为myid，⽂件的内容就是此zookeeper的编号1、2、3 </span></span><br><span class="line"><span class="string">echo 1 &gt;&gt; myid</span></span><br><span class="line"><span class="string">3、把zookeeper1下conf⽬录下的zoo_sample.cfg⽂件复制⼀份改名为zoo.cfg</span></span><br><span class="line"><span class="string">4、修改zoo.cfg的配置</span></span><br><span class="line"><span class="string">dataDir=/usr/local/solrcloud/zookeeper1/data #data⽬录路径</span></span><br><span class="line"><span class="string">clientPort=2181 #客户端连接的端⼝</span></span><br><span class="line"><span class="string">#集群中节点信息，包括ip地址及投票、选举的端⼝</span></span><br><span class="line"><span class="string">server.1=192.168.7.130:2881:3881</span></span><br><span class="line"><span class="string">server.2=192.168.7.130:2882:3882</span></span><br><span class="line"><span class="string">server.3=192.168.7.130:2883:3883</span></span><br><span class="line"><span class="string">5、启动zookpeeker，进⼊zookeeper1/bin⽬录下</span></span><br><span class="line"><span class="string">启动：./zkServer.sh start</span></span><br><span class="line"><span class="string">关闭：./zkServer.sh stop</span></span><br><span class="line"><span class="string">查看状态：./zkServer.sh status</span></span><br><span class="line"><span class="string">'</span></span><br></pre></td></tr></table></figure><h3 id="Solr实例的搭建"><a href="#Solr实例的搭建" class="headerlink" title="Solr实例的搭建"></a>Solr实例的搭建</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">1、把solrhome中的配置⽂件上传到zookeeper集群。使⽤zookeeper的客户端上传</span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">客户端命令位置：</span></span><br><span class="line"><span class="string">cd /root/solr-4.10.3/example/scripts/cloud-scripts</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="comment">#上传配置⽂件</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">./zkcli.sh -zkhost 192.168.7.130:2181,192.168.7.130:2182,192.168.7.130:2183 </span></span><br><span class="line"><span class="string">-cmd upconfig -confdir /usr/local/solrcloud/solrhome1/</span></span><br><span class="line"><span class="string">collection1/conf -confname myconf</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="comment">#查看是否上传成功</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">[root@bogon bin]# ./zkCli.sh</span></span><br><span class="line"><span class="string">Connecting to localhost:2181</span></span><br><span class="line"><span class="string">[zk: localhost:2181(CONNECTED) 0] ls /</span></span><br><span class="line"><span class="string">[configs, zookeeper]</span></span><br><span class="line"><span class="string">[zk: localhost:2181(CONNECTED) 1] ls /configs</span></span><br><span class="line"><span class="string">[myconf]</span></span><br><span class="line"><span class="string">[zk: localhost:2181(CONNECTED) 2] ls /configs/myconf</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">'创建四个solr和四个tomcat，tomcat中每个web.xml,需要修改solrhome的位置'</span></span><br><span class="line">2、修改solrhome下的solr.xml⽂件，指定当前实例运⾏的ip地址及端⼝号</span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">&lt;solrcloud&gt;</span></span><br><span class="line"><span class="string">&lt;str name="host"&gt;$&#123;host:192.168.7.130&#125;&lt;/str&gt;</span></span><br><span class="line"><span class="string">&lt;int name="hostPort"&gt;$&#123;jetty.port:8080&#125;&lt;/int&gt;</span></span><br><span class="line"><span class="string">&lt;str name="hostContext"&gt;$&#123;hostContext:solr&#125;&lt;/str&gt;</span></span><br><span class="line"><span class="string">&lt;int name="zkClientTimeout"&gt;$&#123;zkClientTimeout:30000&#125;&lt;/int&gt;</span></span><br><span class="line"><span class="string">&lt;bool name="genericCoreNodeNames"&gt;$&#123;genericCoreNodeNames:true&#125;&lt;/bool&gt;</span></span><br><span class="line"><span class="string">&lt;/solrcloud&gt;</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line">3、修改每⼀台solr的tomcat 的 bin⽬录下catalina.sh⽂件中加⼊DzkHost指定z</span><br><span class="line">ookeeper服务器地址：</span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">JAVA_OPTS="-DzkHost=192.168.7.130:2181,192.168.7.130:2182,192.168.7.130:2183"</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line">4、重新启动tomcat，此时⼀个主节点多个备份节点，集群只有⼀⽚。</span><br><span class="line">5、创建⼀个两⽚的collection，每⽚是⼀主⼀备。</span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">http://192.168.7.130:8080/solr/admin/collections?action=CREATE&amp;name=</span></span><br><span class="line"><span class="string">collection2&amp;numShards=2&amp;replicationFactor=2</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line">6、删除collection1</span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">http://192.168.7.130:8080/solr/admin/collections?action=DELETE&amp;name=collection1</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="comment">#安装完成</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;单机版&quot;&gt;&lt;a href=&quot;#单机版&quot; class=&quot;headerlink&quot; title=&quot;单机版&quot;&gt;&lt;/a&gt;单机版&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#1、安装linux、jdk、tomcat&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mkdir /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/solr&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mkdir /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/solr/solrhome&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cp -r apache-tomcat-7.0.47 /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/solr/tomcat&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#2、把solr的压缩包上传到服务器,并解压&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tar -zxvf solr-4.10.3.tgz.tgz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#3、把/root/solr-4.10.3/dist/solr-4.10.3.war包部署到tomcat下。并改名为solr.war&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cp /root/solr-4.10.3/dist/solr-4.10.3.war /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/solr/tomcat/webapps/solr.war&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#4、解压war包。启动tomcat⾃动解压。关闭tomcat。删除solr.war&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tomcat/bin/stratup.sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#5、log相关jar把复制到lib⽬录，/root/solr-4.10.3/example/lib/ext&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cp /root/solr-4.10.3/example/lib/ext/* /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/solr/tomcat/webapps/WEB-INF/lib/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#6、Solrhome是存放solr服务器所有配置⽂件的⽬录。在solr-4.10.3/example/solr下&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cp -r solr /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/solr/solrhome&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#7、配置tomcat的web.xml，告诉solr服务器solrhome的位置。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;env-entry&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;	&amp;lt;env-entry-name&amp;gt;solr/home&amp;lt;/env-entry-name&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;	&amp;lt;env-entry-value&amp;gt;/usr/local/solr/solrhome&amp;lt;/env-entry-value&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;	&amp;lt;env-entry-type&amp;gt;java.lang.String&amp;lt;/env-entry-type&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;/env-entry&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#8、启动tomcat，登⼊地址 http://192.168.7.13x:8080/solr&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="运维π" scheme="http://8oc.cc/categories/%E8%BF%90%E7%BB%B4%CF%80/"/>
    
    
      <category term="CentOS" scheme="http://8oc.cc/tags/CentOS/"/>
    
      <category term="Solr" scheme="http://8oc.cc/tags/Solr/"/>
    
  </entry>
  
  <entry>
    <title>Redis安装手册</title>
    <link href="http://8oc.cc/2020/09/26/redis-set/"/>
    <id>http://8oc.cc/2020/09/26/redis-set/</id>
    <published>2020-09-26T07:07:53.000Z</published>
    <updated>2020-09-26T07:54:09.115Z</updated>
    
    <content type="html"><![CDATA[<h2 id="单机版"><a href="#单机版" class="headerlink" title="单机版"></a>单机版</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装redis</span></span><br><span class="line">yum intall gcc-c++</span><br><span class="line">tar -zxvf redis-3.0.0.tar.gz</span><br><span class="line"><span class="built_in">cd</span> redis-3.0.0</span><br><span class="line">Make</span><br><span class="line">make install PREFIX=/usr/<span class="built_in">local</span>/redis</span><br><span class="line"><span class="comment">#启动redis</span></span><br><span class="line"><span class="comment">#修改redis.conf⽂件</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">daemmonize yes</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line">./redis-server redis.conf</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="集群版"><a href="#集群版" class="headerlink" title="集群版"></a>集群版</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装ruby</span></span><br><span class="line">yum install -y ruby</span><br><span class="line">yum install -y rubygems</span><br><span class="line"><span class="comment">#redis集群管理⼯具redis-trib.rb</span></span><br><span class="line"><span class="comment">#在/redis-3.0.0/src⽬录下</span></span><br><span class="line">cp redis-trib.rb /usr/<span class="built_in">local</span>/redis-cluster/redis-trib.rb</span><br><span class="line"><span class="comment">#安装redis-3.0.0.gem</span></span><br><span class="line">gem install redis-3.0.0.gem</span><br><span class="line"><span class="comment">#集群搭建</span></span><br><span class="line"><span class="comment">#创建6个redis实例，端⼝7001-7006</span></span><br><span class="line"><span class="comment">#修改redis.conf</span></span><br><span class="line"><span class="string">'port 7001'</span></span><br><span class="line"><span class="string">'cluster-enabled yes'</span></span><br><span class="line"><span class="comment">#创建⽂件夹</span></span><br><span class="line">mkdir /usr/<span class="built_in">local</span>/redis-cluster</span><br><span class="line">cp -r /usr/<span class="built_in">local</span>/redis/bin /usr/<span class="built_in">local</span>/redis-cluster/redis01</span><br><span class="line"><span class="comment">#修改redis.conf 端⼝</span></span><br><span class="line">cp -r redis01 redis02</span><br><span class="line"><span class="comment">#启动实例，编写⼀个便捷脚本</span></span><br><span class="line">startall.sh</span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">cd redis01</span></span><br><span class="line"><span class="string">./redis-server redis.conf</span></span><br><span class="line"><span class="string">cd ..</span></span><br><span class="line"><span class="string">cd redis02</span></span><br><span class="line"><span class="string">./redis-server redis.conf</span></span><br><span class="line"><span class="string">cd ..</span></span><br><span class="line"><span class="string">cd redis03</span></span><br><span class="line"><span class="string">./redis-server redis.conf</span></span><br><span class="line"><span class="string">cd ..</span></span><br><span class="line"><span class="string">cd redis04</span></span><br><span class="line"><span class="string">./redis-server redis.conf</span></span><br><span class="line"><span class="string">cd ..</span></span><br><span class="line"><span class="string">cd redis05</span></span><br><span class="line"><span class="string">./redis-server redis.conf</span></span><br><span class="line"><span class="string">cd ..</span></span><br><span class="line"><span class="string">cd redis06</span></span><br><span class="line"><span class="string">./redis-server redis.conf</span></span><br><span class="line"><span class="string">cd ..</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line">chmod +x startall.sh</span><br><span class="line">./startall.sh</span><br><span class="line"><span class="comment">#创建集群</span></span><br><span class="line"><span class="comment">#redis集群⾄少需要3个主节点，每个主节点有⼀个从节点总共6个节点</span></span><br><span class="line"><span class="comment">#replicas指定为1表示每个主节点有⼀个从节点</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">./redis-trib.rb create --replicas 1 192.168.7.131:7001 192.168.7.131:7002 </span></span><br><span class="line"><span class="string">192.168.7.131:7003 192.168.7.131:7004 192.168.7.131:7005 192.168.7.131:7006</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="comment">#测试集群</span></span><br><span class="line">./redis-cli -h 192.168.7.131 -p 7002 -c<span class="string">'(-c连接集群)'</span></span><br><span class="line"><span class="comment">#查询集群节点信息</span></span><br><span class="line">cluster nodes</span><br><span class="line"><span class="comment">#查询集群状态信息</span></span><br><span class="line">cluster info</span><br><span class="line"><span class="comment">#关闭reids</span></span><br><span class="line">redis01/redis-cli -p 7001 shutdown</span><br></pre></td></tr></table></figure><h3 id="添加主节点"><a href="#添加主节点" class="headerlink" title="添加主节点"></a>添加主节点</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#添加7007节点</span></span><br><span class="line">./redis-trib.rb add-node 192.168.7.131:7007 192.168.7.131:7001</span><br><span class="line"><span class="string">'如添加失败，删除dump.rdb，nodes.conf再重启'</span></span><br><span class="line"><span class="comment">#确认已添加</span></span><br><span class="line"><span class="comment">#hash槽重新分配</span></span><br><span class="line"><span class="string">'添加完主节点需要对主节点进⾏hash槽分配这样该主节才可以存储数据。redis集群有16384个槽，</span></span><br><span class="line"><span class="string">集群中的每个结点分配⾃已槽，通过查看集群结点可以看到槽占⽤情况。'</span></span><br><span class="line"><span class="comment">#第⼀步：连接上集群</span></span><br><span class="line">./redis-trib.rb reshard 192.168.101.3:7001</span><br><span class="line"><span class="comment">#第⼆步：输⼊要分配的槽数量</span></span><br><span class="line"><span class="comment">#第三步：输⼊接收槽的结点id</span></span><br><span class="line"><span class="string">'通过cluster nodes查看7007结点'</span></span><br><span class="line"><span class="comment">#第四步：输⼊源结点id</span></span><br><span class="line">输⼊all.done为取消分配</span><br></pre></td></tr></table></figure><h3 id="添加从节点"><a href="#添加从节点" class="headerlink" title="添加从节点"></a>添加从节点</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#添加7008从结点，将7008作为7007的从结点</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">./redis-trib.rb add-node --slave --master-id 主节点id 添加节点的ip和</span></span><br><span class="line"><span class="string">端⼝集群中已存在节点ip和端⼝</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">'./redis-trib.rb add-node --slave --master-id 4a9ce829134ead6fc</span></span><br><span class="line"><span class="string">a2df6206bfa1b05246b3923 192.168.7.131:7008 192.168.7.131:7001</span></span><br><span class="line"><span class="string">'</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;单机版&quot;&gt;&lt;a href=&quot;#单机版&quot; class=&quot;headerlink&quot; title=&quot;单机版&quot;&gt;&lt;/a&gt;单机版&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#安装redis&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum intall gcc-c++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tar -zxvf redis-3.0.0.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; redis-3.0.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Make&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make install PREFIX=/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/redis&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#启动redis&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#修改redis.conf⽂件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;daemmonize yes&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./redis-server redis.conf&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="运维π" scheme="http://8oc.cc/categories/%E8%BF%90%E7%BB%B4%CF%80/"/>
    
    
      <category term="CentOS" scheme="http://8oc.cc/tags/CentOS/"/>
    
      <category term="数据库" scheme="http://8oc.cc/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
      <category term="Redis" scheme="http://8oc.cc/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>RabbitMQ安装手册</title>
    <link href="http://8oc.cc/2020/09/26/rabbitmq-set/"/>
    <id>http://8oc.cc/2020/09/26/rabbitmq-set/</id>
    <published>2020-09-26T06:52:59.000Z</published>
    <updated>2020-09-26T07:09:07.413Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Erlang安装"><a href="#Erlang安装" class="headerlink" title="Erlang安装"></a>Erlang安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装依赖环境</span></span><br><span class="line">yum -y install make gcc gcc-c++ kernel-devel m4 </span><br><span class="line">ncurses-devel openssl-devel unixODBC-devel</span><br><span class="line"><span class="comment">#解压</span></span><br><span class="line">tar -xvzf otp_src_20.0.tar.gz</span><br><span class="line"><span class="comment">#安装</span></span><br><span class="line">./configure --prefix=/root/erlang --with-ssl -<span class="built_in">enable</span>-threads </span><br><span class="line">-<span class="built_in">enable</span>-smmp-support -<span class="built_in">enable</span>-kernel-poll --<span class="built_in">enable</span>-hipe --without -javac</span><br><span class="line"><span class="comment">#编译及安装</span></span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="comment">#配置环境变量</span></span><br><span class="line">vi /etc/profile</span><br><span class="line">PATH=<span class="variable">$PATH</span>:/root/erlang/bin</span><br><span class="line"><span class="comment">#⽣效</span></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line"><span class="comment">#验证安装成功</span></span><br><span class="line">erl</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="RabbitMQ"><a href="#RabbitMQ" class="headerlink" title="RabbitMQ"></a>RabbitMQ</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#解压</span></span><br><span class="line">xz -d rabbitmq-server-generic-unix-3.7.6.tar.xz</span><br><span class="line">tar -xvf rabbitmq-server-generic-unix-3.7.6.tar</span><br><span class="line"><span class="comment">#进⼊sbin⽂件</span></span><br><span class="line"><span class="built_in">cd</span> rabbitmq_server-3.7.6/sbin</span><br><span class="line"><span class="comment">#启⽤web管理界⾯</span></span><br><span class="line">./rabbitmq-plugins <span class="built_in">enable</span> rabbitmq_management</span><br><span class="line"><span class="comment">#添加配置⽂件</span></span><br><span class="line">rabbitmq.conf</span><br></pre></td></tr></table></figure><h3 id="服务管理"><a href="#服务管理" class="headerlink" title="服务管理"></a>服务管理</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#启动</span></span><br><span class="line">rabbitmq-server -detached / start</span><br><span class="line"><span class="comment">#查看状态</span></span><br><span class="line">rabbitmqctl status</span><br><span class="line"><span class="comment">#关闭服务</span></span><br><span class="line">rabbitmqctl stop</span><br><span class="line"><span class="comment">#列出⻆⾊</span></span><br><span class="line">rabbitmqctl list_users</span><br><span class="line"><span class="comment">#开启某个插件：</span></span><br><span class="line">rabbitmq-pluginsenable xxx</span><br><span class="line"><span class="comment">#关闭某个插件：</span></span><br><span class="line">rabbitmq-pluginsdisable xxx</span><br></pre></td></tr></table></figure><h3 id="virtual-host管理"><a href="#virtual-host管理" class="headerlink" title="virtual_host管理"></a>virtual_host管理</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">新建</span><br><span class="line">rabbitmqctl add_vhost xxx</span><br><span class="line">删除</span><br><span class="line">rabbitmqctl delete_vshot xxx</span><br></pre></td></tr></table></figure><h3 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">新建</span><br><span class="line">rabbitmqctl add_user admin admin</span><br><span class="line">删除</span><br><span class="line">rabbitmqctl delete_user admin</span><br><span class="line">改密</span><br><span class="line">rabbitmqctl change_password amdin 123456</span><br><span class="line">设置⽤户⻆⾊</span><br><span class="line">rabbitmqctl set_user_tags admin administrator</span><br><span class="line"><span class="string">'Tag可以为 administrator,monitoring,policymaker,management'</span></span><br></pre></td></tr></table></figure><h3 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#添加权限</span></span><br><span class="line">rabbitmqctl set_permissions -p / admin <span class="string">".*"</span> <span class="string">".*"</span> <span class="string">".*"</span></span><br><span class="line"><span class="comment">#修改⽤户⻆⾊</span></span><br><span class="line">rabbitmqctl set_user_tags username administrator</span><br><span class="line"><span class="string">'权限设置说明：rabbitmqctl set_permissions [-pvhostpath] &#123;user&#125; &#123;con</span></span><br><span class="line"><span class="string">f&#125; &#123;write&#125; &#123;read&#125;</span></span><br><span class="line"><span class="string">Vhostpath：Vhost路径。</span></span><br><span class="line"><span class="string">user：⽤户名。</span></span><br><span class="line"><span class="string">Conf：⼀个正则表达式match哪些配置资源能够被该⽤户访问。</span></span><br><span class="line"><span class="string">Write：⼀个正则表达式match哪些配置资源能够被该⽤户读。</span></span><br><span class="line"><span class="string">Read：⼀个正则表达式match哪些配置资源能够被该⽤户访问。'</span></span><br><span class="line"><span class="comment">#查看(指定hostpath)所有⽤户的权限信息</span></span><br><span class="line">rabbitmqctl list_permissions -p /</span><br><span class="line"><span class="comment">#查看指定⽤户的权限信息</span></span><br><span class="line">rabbitmqctl list_user_permissions User</span><br><span class="line"><span class="comment">#清除⽤户的权限信息</span></span><br><span class="line">rabbitmqctl clear_permissions admin</span><br></pre></td></tr></table></figure><h3 id="获取服务器状态信息"><a href="#获取服务器状态信息" class="headerlink" title="获取服务器状态信息"></a>获取服务器状态信息</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl status <span class="comment">#获取服务器状态：</span></span><br><span class="line">rabbitmqctl stop_app <span class="comment">#关闭应⽤</span></span><br><span class="line">rabbitmqctl start_app <span class="comment">#启动应⽤</span></span><br><span class="line">rabbitmqctl reset <span class="comment">#清除所有队列</span></span><br><span class="line">rabbitmqctl list_queues <span class="comment">#查看所有队列信息</span></span><br><span class="line"><span class="comment">#获取队列信息</span></span><br><span class="line"><span class="comment">#Queueinfoitem可以为：name，durable，auto_delete，arguments，messages_ready，</span></span><br><span class="line"><span class="comment">#messages_unacknowledged，messages，consumers，memory。</span></span><br><span class="line">rabbitmqctl list_queues[-p vhostpath] [queueinfoitem ...] </span><br><span class="line"><span class="comment">#获取Exchange信息</span></span><br><span class="line"><span class="comment">#Exchangeinfoitem有：name，type，durable，auto_delete，internal，arguments。</span></span><br><span class="line">rabbitmqctllist_exchanges[-p vhostpath] [exchange infoitem ...]</span><br><span class="line"><span class="comment">#获取Binding信息：</span></span><br><span class="line"><span class="comment">#Bindinginfoitem有：source_name，source_kind，destination_name，destination_kind，</span></span><br><span class="line"><span class="comment">#routing_key，arguments。</span></span><br><span class="line">rabbitmqctllist_bindings[-p vhostpath] [bindinginfoitem ...]</span><br><span class="line"><span class="comment">#获取Connection信息</span></span><br><span class="line"><span class="comment">#Connectioninfoitem有：recv_oct，recv_cnt，send_oct，send_cnt，send_pend等。</span></span><br><span class="line">rabbitmqctllist_connections [connectioninfoitem...]</span><br><span class="line"><span class="comment">#获取Channel信息</span></span><br><span class="line"><span class="comment">#Channelinfoitem有consumer_count，messages_unacknowledged，messages_uncommitted，</span></span><br><span class="line"><span class="comment">#acks_uncommitted，messages_unconfirmed，prefetch_count，client_flow_blocked。</span></span><br><span class="line">rabbitmqctl list_channels[channelinfoitem ...]</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Erlang安装&quot;&gt;&lt;a href=&quot;#Erlang安装&quot; class=&quot;headerlink&quot; title=&quot;Erlang安装&quot;&gt;&lt;/a&gt;Erlang安装&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#安装依赖环境&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum -y install make gcc gcc-c++ kernel-devel m4 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ncurses-devel openssl-devel unixODBC-devel&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#解压&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tar -xvzf otp_src_20.0.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#安装&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./configure --prefix=/root/erlang --with-ssl -&lt;span class=&quot;built_in&quot;&gt;enable&lt;/span&gt;-threads &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-&lt;span class=&quot;built_in&quot;&gt;enable&lt;/span&gt;-smmp-support -&lt;span class=&quot;built_in&quot;&gt;enable&lt;/span&gt;-kernel-poll --&lt;span class=&quot;built_in&quot;&gt;enable&lt;/span&gt;-hipe --without -javac&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#编译及安装&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make &amp;amp;&amp;amp; make install&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#配置环境变量&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vi /etc/profile&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;PATH=&lt;span class=&quot;variable&quot;&gt;$PATH&lt;/span&gt;:/root/erlang/bin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#⽣效&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;source&lt;/span&gt; /etc/profile&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#验证安装成功&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;erl&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="运维π" scheme="http://8oc.cc/categories/%E8%BF%90%E7%BB%B4%CF%80/"/>
    
    
      <category term="CentOS" scheme="http://8oc.cc/tags/CentOS/"/>
    
      <category term="RabbitMQ" scheme="http://8oc.cc/tags/RabbitMQ/"/>
    
  </entry>
  
  <entry>
    <title>Nginx安装手册</title>
    <link href="http://8oc.cc/2020/09/26/nginx-set/"/>
    <id>http://8oc.cc/2020/09/26/nginx-set/</id>
    <published>2020-09-26T05:48:16.000Z</published>
    <updated>2020-09-26T06:52:35.139Z</updated>
    
    <content type="html"><![CDATA[<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装环境</span></span><br><span class="line">yum -y install gcc-c++ pcre pcre-devel zlib zlib-devel openssl openssl-devel</span><br><span class="line"><span class="comment">#编译安装</span></span><br><span class="line">tar -zxvf nginx-1.8.0.tar.gz</span><br><span class="line"><span class="built_in">cd</span> nginx-1.8.0</span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">./configure \</span></span><br><span class="line"><span class="string">--prefix=/usr/local/nginx \</span></span><br><span class="line"><span class="string">--pid-path=/var/run/nginx/nginx.pid \</span></span><br><span class="line"><span class="string">--lock-path=/var/lock/nginx.lock \</span></span><br><span class="line"><span class="string">--error-log-path=/var/log/nginx/error.log \</span></span><br><span class="line"><span class="string">--http-log-path=/var/log/nginx/access.log \</span></span><br><span class="line"><span class="string">--with-http_gzip_static_module \</span></span><br><span class="line"><span class="string">--http-client-body-temp-path=/var/temp/nginx/client \</span></span><br><span class="line"><span class="string">--http-proxy-temp-path=/var/temp/nginx/proxy \</span></span><br><span class="line"><span class="string">--http-fastcgi-temp-path=/var/temp/nginx/fastcgi \</span></span><br><span class="line"><span class="string">--http-uwsgi-temp-path=/var/temp/nginx/uwsgi \</span></span><br><span class="line"><span class="string">--http-scgi-temp-path=/var/temp/nginx/scgi</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">'注意：上边将临时⽂件⽬录指定为/var/temp/nginx，需要在/var下创建temp及nginx⽬录'</span></span><br><span class="line"><span class="comment">#编译安装</span></span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="comment">#启动nginx</span></span><br><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/nginx/sbin</span><br><span class="line">./nginx</span><br><span class="line"><span class="comment">#指定配置⽂件加载</span></span><br><span class="line">./nginx -c /usr/<span class="built_in">local</span>/nginx/conf/nginx.conf</span><br><span class="line"><span class="comment">#停⽌nginx</span></span><br><span class="line"><span class="comment">#快速停⽌ 此⽅式相当于先查出nginx进程id再使⽤kill命令强制杀掉进程</span></span><br><span class="line">./nginx -s stop</span><br><span class="line"><span class="comment">#完整停⽌ 此⽅式停⽌步骤是待nginx进程处理任务完毕进⾏停⽌</span></span><br><span class="line">./nginx -s quit</span><br><span class="line"><span class="comment">#重新加载配置⽂件</span></span><br><span class="line">./nginx -s reload</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'CentOS启动nginx出现nginx: [emerg] open() "/var/run/nginx/nginx.pid" </span></span><br><span class="line"><span class="string">failed (2: No such file or director）'</span></span><br><span class="line"><span class="comment">#解决⽅法，在run下创建nginx⽂件夹，并新建nginx.pid;</span></span><br><span class="line">mkdir /var/run/nginx</span><br><span class="line">touch /var/run/nginx/nginx.pid</span><br></pre></td></tr></table></figure><h2 id="Nginx实现虚拟机"><a href="#Nginx实现虚拟机" class="headerlink" title="Nginx实现虚拟机"></a>Nginx实现虚拟机</h2><h3 id="IP区分虚拟主机-单机多IP"><a href="#IP区分虚拟主机-单机多IP" class="headerlink" title="IP区分虚拟主机(单机多IP)"></a>IP区分虚拟主机(单机多IP)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#将/etc/sysconfig/network-scripts/ifcfg-ens33⽂件复制⼀份，</span></span><br><span class="line"><span class="comment">#命名为ifcfg-ens33:1修改其中内容：</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">DEVICE=ens33:1</span></span><br><span class="line"><span class="string">IPADDR=192.168.7.xxx</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="comment">#'重启系统'</span></span><br><span class="line"><span class="comment">#修改nginx.conf</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">server &#123;</span></span><br><span class="line"><span class="string">listen 80;</span></span><br><span class="line"><span class="string">server_name 192.168.7.137;</span></span><br><span class="line"><span class="string">#charset koi8-r;</span></span><br><span class="line"><span class="string">#access_log logs/host.access.log main;</span></span><br><span class="line"><span class="string">location / &#123;</span></span><br><span class="line"><span class="string">root html-137;</span></span><br><span class="line"><span class="string">index index.html index.htm;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">server &#123;</span></span><br><span class="line"><span class="string">listen 80;</span></span><br><span class="line"><span class="string">server_name 192.168.7.138;</span></span><br><span class="line"><span class="string">#charset koi8-r;</span></span><br><span class="line"><span class="string">#access_log logs/host.access.log main;</span></span><br><span class="line"><span class="string">location / &#123;</span></span><br><span class="line"><span class="string">root html-138;</span></span><br><span class="line"><span class="string">index index.html index.htm;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">'</span></span><br></pre></td></tr></table></figure><h3 id="基于端口-同IP不同端口区分项目"><a href="#基于端口-同IP不同端口区分项目" class="headerlink" title="基于端口(同IP不同端口区分项目)"></a>基于端口(同IP不同端口区分项目)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">server &#123;</span></span><br><span class="line"><span class="string">listen 80;</span></span><br><span class="line"><span class="string">server_name 192.168.7.137;</span></span><br><span class="line"><span class="string">#charset koi8-r;</span></span><br><span class="line"><span class="string">#access_log logs/host.access.log main;</span></span><br><span class="line"><span class="string">location / &#123;</span></span><br><span class="line"><span class="string">root html-137;</span></span><br><span class="line"><span class="string">index index.html index.htm;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">server &#123;</span></span><br><span class="line"><span class="string">listen 81;</span></span><br><span class="line"><span class="string">server_name 192.168.7.137;</span></span><br><span class="line"><span class="string">#charset koi8-r;</span></span><br><span class="line"><span class="string">#access_log logs/host.access.log main;</span></span><br><span class="line"><span class="string">location / &#123;</span></span><br><span class="line"><span class="string">root html-81;</span></span><br><span class="line"><span class="string">index index.html index.htm;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">'</span></span><br></pre></td></tr></table></figure><h3 id="基于域名-通过域名区分项目"><a href="#基于域名-通过域名区分项目" class="headerlink" title="基于域名(通过域名区分项目)"></a>基于域名(通过域名区分项目)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#修改window的hosts⽂件：（C:\Windows\System32\drivers\etc）</span></span><br><span class="line"><span class="comment">#添加host</span></span><br><span class="line"><span class="comment">#192.168.7.137 www.123.com</span></span><br><span class="line"><span class="comment">#192.168.7.137 sso.123.com</span></span><br><span class="line"><span class="string">'server &#123;</span></span><br><span class="line"><span class="string">listen 80;</span></span><br><span class="line"><span class="string">server_name www.123.com;</span></span><br><span class="line"><span class="string">#charset koi8-r;</span></span><br><span class="line"><span class="string">#access_log logs/host.access.log main;</span></span><br><span class="line"><span class="string">location / &#123;</span></span><br><span class="line"><span class="string">root html-www;</span></span><br><span class="line"><span class="string">index index.html index.htm;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">server &#123;</span></span><br><span class="line"><span class="string">listen 80;</span></span><br><span class="line"><span class="string">server_name sso.123.com;</span></span><br><span class="line"><span class="string">#charset koi8-r;</span></span><br><span class="line"><span class="string">#access_log logs/host.access.log main;</span></span><br><span class="line"><span class="string">location / &#123;</span></span><br><span class="line"><span class="string">root html-hehe;</span></span><br><span class="line"><span class="string">index index.html index.htm;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">'</span></span><br></pre></td></tr></table></figure><h2 id="反向代理"><a href="#反向代理" class="headerlink" title="反向代理"></a>反向代理</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#可通过不同域名访问不同服务器，访问被nginx拦截，</span></span><br><span class="line"><span class="comment">#启两台tomcat，修改server.xml中端⼝</span></span><br><span class="line"><span class="comment">#则访问到 192.168.7.137:8080 192.168.7.137:8081</span></span><br><span class="line"><span class="comment">#host⽂件添加</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">192.168.7.137 8080.bt0a.com</span></span><br><span class="line"><span class="string">192.168.7.137 8081.bt0a.com</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="comment">#nginx.conf添加</span></span><br><span class="line"></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">upstream tomcat1&#123;</span></span><br><span class="line"><span class="string">server 192.168.7.137:8080;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">upstream tomcat2&#123;</span></span><br><span class="line"><span class="string">server 192.168.7.137:8081;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">server&#123;</span></span><br><span class="line"><span class="string">listen 80;</span></span><br><span class="line"><span class="string">server_name 8080.bt0a.com;</span></span><br><span class="line"><span class="string">location / &#123;</span></span><br><span class="line"><span class="string">proxy_pass http://tomcat1;</span></span><br><span class="line"><span class="string">index index.htm index.html;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">server&#123;</span></span><br><span class="line"><span class="string">listen 80;</span></span><br><span class="line"><span class="string">server_name 8081.bt0a.com;</span></span><br><span class="line"><span class="string">location / &#123;</span></span><br><span class="line"><span class="string">proxy_pass http://tomcat2;</span></span><br><span class="line"><span class="string">index index.htm index.html;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">'</span></span><br></pre></td></tr></table></figure><h2 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a>负载均衡</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#修改nginx.conf</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">upstream tomcat1&#123;</span></span><br><span class="line"><span class="string">server 192.168.7.137:8080 weight=2;</span></span><br><span class="line"><span class="string">server 192.168.7.137:8081 weight=1; #loadbalance</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="comment">#负载均衡，设备状态配置</span></span><br><span class="line"><span class="comment">#'down' 表示单前的server暂时不参与负载</span></span><br><span class="line"><span class="comment">#'weight' 默认为1.weight越⼤，负载的权重就越⼤。</span></span><br><span class="line"><span class="comment">#'max_fails' 允许请求失败的次数默认为1.当超过最⼤次数时，返回proxy_next_up</span></span><br><span class="line"><span class="comment">#stream 模块定义的错误</span></span><br><span class="line"><span class="comment">#'fail_timeout:max_fails' 次失败后，暂停的时间。</span></span><br><span class="line"><span class="comment">#'backup' 其它所有的⾮backup机器down或者忙的时候，请求backup机器。所以这台机器压⼒会最轻</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlink&quot; title=&quot;安装&quot;&gt;&lt;/a&gt;安装&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#安装环境&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum -y install gcc-c++ pcre pcre-devel zlib zlib-devel openssl openssl-devel&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#编译安装&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tar -zxvf nginx-1.8.0.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; nginx-1.8.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;./configure \&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;--prefix=/usr/local/nginx \&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;--pid-path=/var/run/nginx/nginx.pid \&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;--lock-path=/var/lock/nginx.lock \&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;--error-log-path=/var/log/nginx/error.log \&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;--http-log-path=/var/log/nginx/access.log \&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;--with-http_gzip_static_module \&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;--http-client-body-temp-path=/var/temp/nginx/client \&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;--http-proxy-temp-path=/var/temp/nginx/proxy \&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;--http-fastcgi-temp-path=/var/temp/nginx/fastcgi \&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;--http-uwsgi-temp-path=/var/temp/nginx/uwsgi \&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;--http-scgi-temp-path=/var/temp/nginx/scgi&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&#39;注意：上边将临时⽂件⽬录指定为/var/temp/nginx，需要在/var下创建temp及nginx⽬录&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#编译安装&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make &amp;amp;&amp;amp; make install&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#启动nginx&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/nginx/sbin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#指定配置⽂件加载&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./nginx -c /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/nginx/conf/nginx.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#停⽌nginx&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#快速停⽌ 此⽅式相当于先查出nginx进程id再使⽤kill命令强制杀掉进程&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./nginx -s stop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#完整停⽌ 此⽅式停⽌步骤是待nginx进程处理任务完毕进⾏停⽌&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./nginx -s quit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#重新加载配置⽂件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./nginx -s reload&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="运维π" scheme="http://8oc.cc/categories/%E8%BF%90%E7%BB%B4%CF%80/"/>
    
    
      <category term="CentOS" scheme="http://8oc.cc/tags/CentOS/"/>
    
      <category term="Nginx" scheme="http://8oc.cc/tags/Nginx/"/>
    
  </entry>
  
  <entry>
    <title>MySQL安装及配置</title>
    <link href="http://8oc.cc/2020/09/26/db-mysql-set/"/>
    <id>http://8oc.cc/2020/09/26/db-mysql-set/</id>
    <published>2020-09-26T05:35:29.000Z</published>
    <updated>2020-09-26T05:47:03.654Z</updated>
    
    <content type="html"><![CDATA[<h2 id="MySQL安装"><a href="#MySQL安装" class="headerlink" title="MySQL安装"></a>MySQL安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1、从官⽹源下载</span></span><br><span class="line">https://dev.mysql.com/downloads/repo/yum/</span><br><span class="line">wget https://dev.mysql.com/get/mysql80-community-release-el7-2.</span><br><span class="line">noarch.rpm</span><br><span class="line"><span class="comment">#2、更新/安装 刚才下载下来的包</span></span><br><span class="line">rpm -Uvh mysql80-community-release-el7-2.noarch.rpm</span><br><span class="line">-U&lt;套件档&gt;或--upgrade&lt;套件档&gt;：升级指定的套件档；</span><br><span class="line">-v：显示指令执⾏过程；</span><br><span class="line">-h或--<span class="built_in">hash</span>：套件安装时列出标记；</span><br><span class="line">-Uvh：升级软件包--Update；</span><br><span class="line"><span class="comment">#3、列出包⾥⾯所有可⽤的版本</span></span><br><span class="line">yum repolist all | grep mysql</span><br><span class="line"><span class="comment">#4、禁⽤8.0版本，启⽤5.7版本</span></span><br><span class="line">yum-config-manager --<span class="built_in">disable</span> mysql80-community</span><br><span class="line">yum-config-manager --<span class="built_in">enable</span> mysql57-community</span><br><span class="line"><span class="comment">#5、再检查⼀次现在可⽤的版本</span></span><br><span class="line">yum repolist enabled | grep mysql</span><br><span class="line"><span class="comment">#6、安装</span></span><br><span class="line">yum install mysql-community-server</span><br><span class="line"><span class="comment">#7、确认版本</span></span><br><span class="line">mysql --version</span><br><span class="line"><span class="comment">#设置开机启动</span></span><br><span class="line">systemctl <span class="built_in">enable</span> mysqld</span><br><span class="line">systemctl daemon-reload</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="MySQL初始化"><a href="#MySQL初始化" class="headerlink" title="MySQL初始化"></a>MySQL初始化</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1、启动/关闭服务/查看状态</span></span><br><span class="line">systemctl start/stop/status mysqld.service</span><br><span class="line"><span class="comment">#2、获取密码</span></span><br><span class="line">grep <span class="string">'temporary password'</span> /var/<span class="built_in">log</span>/mysqld.log</span><br><span class="line"><span class="comment">#3、登录</span></span><br><span class="line">mysql -uroot -p</span><br><span class="line"><span class="comment">#4、修改密码</span></span><br><span class="line">ALTER USER <span class="string">'root'</span>@<span class="string">'localhost'</span> IDENTIFIED BY <span class="string">'Xx@123456'</span>;</span><br><span class="line"><span class="comment">#5、远程连接</span></span><br><span class="line">use mysql</span><br><span class="line"><span class="comment">#在mysql数据库中查看user表中相关的信息</span></span><br><span class="line">select host, user, authentication_string, plugin from user;</span><br><span class="line"><span class="comment">#更改（localhost 表示只能进⾏本地访问，不能进⾏远程连接）</span></span><br><span class="line">update user <span class="built_in">set</span> host = <span class="string">"%"</span> <span class="built_in">where</span> user = <span class="string">"root"</span>;</span><br><span class="line"><span class="comment">#刷新</span></span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure><h2 id="权限设置"><a href="#权限设置" class="headerlink" title="权限设置"></a>权限设置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">GRANT命令说明：</span><br><span class="line"><span class="comment">#表示所有权限，你也可以使⽤select、update等权限提到的权限</span></span><br><span class="line">ALL PRIVILEGES </span><br><span class="line"><span class="comment">#⽤来指定权限针对哪些库和表</span></span><br><span class="line">ON </span><br><span class="line"><span class="comment">#中前⾯的*号⽤来指定数据库名，后⾯的*号⽤来指定表名</span></span><br><span class="line">*.* </span><br><span class="line"><span class="comment">#表示将权限赋予某个⽤户。</span></span><br><span class="line">TO </span><br><span class="line"><span class="comment">#表示xu⽤户，@后⾯接限制的主机，可以是IP、IP段、域名以及%，%表示任何地⽅</span></span><br><span class="line">xu@<span class="string">'localhost'</span></span><br><span class="line"><span class="comment">#指定⽤户的登录密码</span></span><br><span class="line">IDENTIFIED BY</span><br><span class="line"><span class="comment">#这个选项表示该⽤户可以将⾃⼰拥有的权限授权给别⼈</span></span><br><span class="line">WITH GRANT OPTION</span><br><span class="line"><span class="comment">#创建⼀个只允许从本地登录的超级⽤户xu，并允许将权限赋予别的⽤户，密码为Xx@123456</span></span><br><span class="line">GRANT ALL PRIVILEGES ON *.* TO xx@<span class="string">'localhost'</span> IDENTIFIED BY </span><br><span class="line">  <span class="string">'Xx@123456'</span> WITH GRANT OPTION</span><br><span class="line"><span class="comment">#创建⼀个⼀般的程序⽤户，这个⽤户可能只需要SELECT, INSERT, UPDATE, DELETE, </span></span><br><span class="line"><span class="comment">#CREATE TEMPORARY TABLES等权限如果有存储过程还需要加上EXECUTE权限，</span></span><br><span class="line"><span class="comment">#⼀般是指定内⽹⽹段192.168.100⽹段</span></span><br><span class="line">GRANT USAGE,SELECT, INSERT, UPDATE, DELETE, SHOW VIEW ,CREATE TEMPORARY TABLES,</span><br><span class="line">EXECUTE ON `<span class="built_in">test</span>`.* TO xx@<span class="string">'192.168.100.%'</span>IDENTIFIED BY <span class="string">'xx@123456'</span>;</span><br><span class="line"><span class="comment">#创建⼀个普通⽤户(仅有查询权限)</span></span><br><span class="line">GRANT USAGE,SELECT ON `<span class="built_in">test</span>`.* TO xx@<span class="string">'192.168.100.%'</span> IDENTIFIED BY <span class="string">'xx@123456'</span>;</span><br><span class="line"><span class="comment">#刷新权限</span></span><br><span class="line">FLUSH PRIVILEGES</span><br><span class="line"><span class="comment">#查看权限</span></span><br><span class="line">SHOW GRANTS FOR <span class="string">'xx'</span>@<span class="string">'%'</span>;</span><br><span class="line"><span class="comment">#回收权限</span></span><br><span class="line">REVOKE DELETE ON <span class="built_in">test</span>.* FROM <span class="string">'xx'</span>@<span class="string">'192.168.100.%'</span>;</span><br><span class="line"><span class="comment">#删除⽤户</span></span><br><span class="line">DROP USER <span class="string">'xx'</span>@<span class="string">'192.168.100.%'</span>;</span><br></pre></td></tr></table></figure><h2 id="基础配置"><a href="#基础配置" class="headerlink" title="基础配置"></a>基础配置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/my.cnf</span><br><span class="line"><span class="comment">#数据库⼤⼩写</span></span><br><span class="line">lower_case_table_names=1</span><br><span class="line"><span class="comment">#字符编码</span></span><br><span class="line">character-set-server=utf8</span><br><span class="line"><span class="comment">#开通⽇志</span></span><br><span class="line">general_log=1</span><br><span class="line"><span class="comment">#⽇志地址</span></span><br><span class="line">general_log_file=/usr/<span class="built_in">local</span>/**/general.log</span><br><span class="line"><span class="comment">#开启慢查询</span></span><br><span class="line">slow_query_log=1</span><br><span class="line"><span class="comment">#慢查询地址</span></span><br><span class="line">slow_query_log_file=/**/**/slowquery.log</span><br><span class="line"><span class="comment">#慢查询阀值</span></span><br><span class="line">long_query_time=5</span><br><span class="line"><span class="comment">#输出⽅式 FILE表示⽂件，TABLE表示数据库</span></span><br><span class="line">log_output=<span class="string">' FILE,TABLE'</span></span><br><span class="line"><span class="comment">#添加log⽂件权限</span></span><br><span class="line">chomd 777 <span class="built_in">log</span></span><br></pre></td></tr></table></figure><h2 id="sql-mode-only-full-group-by问题"><a href="#sql-mode-only-full-group-by问题" class="headerlink" title="sql_mode=only_full_group_by问题"></a>sql_mode=only_full_group_by问题</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">set</span> session sql_mode=<span class="string">'STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,</span></span><br><span class="line"><span class="string">ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION'</span>;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;MySQL安装&quot;&gt;&lt;a href=&quot;#MySQL安装&quot; class=&quot;headerlink&quot; title=&quot;MySQL安装&quot;&gt;&lt;/a&gt;MySQL安装&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#1、从官⽹源下载&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;https://dev.mysql.com/downloads/repo/yum/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wget https://dev.mysql.com/get/mysql80-community-release-el7-2.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;noarch.rpm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#2、更新/安装 刚才下载下来的包&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rpm -Uvh mysql80-community-release-el7-2.noarch.rpm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-U&amp;lt;套件档&amp;gt;或--upgrade&amp;lt;套件档&amp;gt;：升级指定的套件档；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-v：显示指令执⾏过程；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-h或--&lt;span class=&quot;built_in&quot;&gt;hash&lt;/span&gt;：套件安装时列出标记；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-Uvh：升级软件包--Update；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#3、列出包⾥⾯所有可⽤的版本&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum repolist all | grep mysql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#4、禁⽤8.0版本，启⽤5.7版本&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum-config-manager --&lt;span class=&quot;built_in&quot;&gt;disable&lt;/span&gt; mysql80-community&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum-config-manager --&lt;span class=&quot;built_in&quot;&gt;enable&lt;/span&gt; mysql57-community&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#5、再检查⼀次现在可⽤的版本&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum repolist enabled | grep mysql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#6、安装&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum install mysql-community-server&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#7、确认版本&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mysql --version&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#设置开机启动&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl &lt;span class=&quot;built_in&quot;&gt;enable&lt;/span&gt; mysqld&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl daemon-reload&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="DBπ" scheme="http://8oc.cc/categories/DB%CF%80/"/>
    
    
      <category term="CentOS" scheme="http://8oc.cc/tags/CentOS/"/>
    
      <category term="数据库" scheme="http://8oc.cc/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
      <category term="Mysql" scheme="http://8oc.cc/tags/Mysql/"/>
    
  </entry>
  
  <entry>
    <title>CentOS安装FTP</title>
    <link href="http://8oc.cc/2020/09/26/linux-centos-ftp/"/>
    <id>http://8oc.cc/2020/09/26/linux-centos-ftp/</id>
    <published>2020-09-26T05:30:59.000Z</published>
    <updated>2020-09-26T05:32:28.886Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装组件</span></span><br><span class="line">yum -y install vsftpd</span><br><span class="line"><span class="comment">#添加⽤户</span></span><br><span class="line">useradd ftpuser</span><br><span class="line"><span class="comment">#添加密码</span></span><br><span class="line">pssswd ftpuser</span><br><span class="line"><span class="comment">#添加21端⼝</span></span><br><span class="line">vim /etc/sysconfig/iptables</span><br><span class="line"><span class="comment">#重启iptales</span></span><br><span class="line">systemtcl restart iptables</span><br><span class="line"><span class="comment">#修改selinux</span></span><br><span class="line"><span class="comment">#查看状态</span></span><br><span class="line">getsebool -a|grep ftp</span><br><span class="line"><span class="comment">#执⾏</span></span><br><span class="line">setsebool -P allow_ftpd_full_access on</span><br><span class="line">setsebool -P ftp_home_dir on</span><br><span class="line"><span class="comment">#关闭匿名访问</span></span><br><span class="line">vi /etc/vsftpd/vsftpd.conf</span><br><span class="line">anonymous_enable=no</span><br><span class="line"><span class="comment">#重启服务</span></span><br><span class="line">systemtcl restart vsftpd</span><br><span class="line"><span class="comment">#开启被动模式</span></span><br><span class="line"><span class="comment">#vsftpd.conf末尾添加</span></span><br><span class="line">pasv_min_port=30000</span><br><span class="line">pasv_max_port=30999</span><br><span class="line"><span class="comment">#iptables添加 30000:30999</span></span><br><span class="line"><span class="comment">#重启</span></span><br><span class="line"><span class="comment">#设置开机启动</span></span><br><span class="line">chkconfig vsftpd on</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=
      
    
    </summary>
    
      <category term="运维π" scheme="http://8oc.cc/categories/%E8%BF%90%E7%BB%B4%CF%80/"/>
    
    
      <category term="CentOS" scheme="http://8oc.cc/tags/CentOS/"/>
    
      <category term="FTP" scheme="http://8oc.cc/tags/FTP/"/>
    
  </entry>
  
  <entry>
    <title>CentOS7最小化安装</title>
    <link href="http://8oc.cc/2020/09/26/centos7-mini/"/>
    <id>http://8oc.cc/2020/09/26/centos7-mini/</id>
    <published>2020-09-26T04:50:56.000Z</published>
    <updated>2021-05-31T13:14:23.528Z</updated>
    
    <content type="html"><![CDATA[<h2 id="网络配置"><a href="#网络配置" class="headerlink" title="网络配置"></a>网络配置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#最⼩化安装CentOS7，⾸先需要配置⽹络</span></span><br><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-eno33</span><br><span class="line"><span class="comment">#修改</span></span><br><span class="line">ONBOOT=yes</span><br><span class="line"><span class="comment">#静态ip</span></span><br><span class="line">BOOTPROTO=static</span><br><span class="line">IPADDR=192.168.3.130 <span class="comment">#本机地址</span></span><br><span class="line">NETMASK=255.255.255.0 <span class="comment">#⼦⽹掩码</span></span><br><span class="line">GATEWAY=192.168.3.1 <span class="comment">#默认⽹关</span></span><br><span class="line">DNS1=8.8.8.8</span><br><span class="line">DNS2=114.114.114.114</span><br><span class="line"><span class="comment">#重启⽹卡</span></span><br><span class="line">systemctl network restart</span><br><span class="line"><span class="comment">#查看⽹卡信息</span></span><br><span class="line">ip addr</span><br><span class="line"><span class="comment">#查看哪些组件包含了ifconfig命令</span></span><br><span class="line">yum <span class="string">'provides'</span> ifconfig</span><br><span class="line"><span class="comment">#或</span></span><br><span class="line">yum whatprovides ifconfig</span><br><span class="line"><span class="comment">#安装</span></span><br><span class="line">yum install -y net-tools</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="SSH安装"><a href="#SSH安装" class="headerlink" title="SSH安装"></a>SSH安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装 </span></span><br><span class="line">yum install -y openssh-server</span><br><span class="line"><span class="comment">#配置/etc/ssh/sshd_config</span></span><br><span class="line">vi etc/ssh/sshd_config</span><br><span class="line"><span class="comment"># 关于监听端口、监听地址前的 # 号去除</span></span><br><span class="line">port 22</span><br><span class="line">ListenAddress 0.0.0.0</span><br><span class="line">ListenAddress ::</span><br><span class="line"><span class="comment"># 然后开启允许远程登录</span></span><br><span class="line">PermitRootLogin yes</span><br><span class="line"><span class="comment"># 开启使用用户名密码来作为连接验证</span></span><br><span class="line">PasswordAuthentication yes</span><br></pre></td></tr></table></figure><h2 id="CentOS-时区设置"><a href="#CentOS-时区设置" class="headerlink" title="CentOS 时区设置"></a>CentOS 时区设置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#centos6</span></span><br><span class="line"><span class="comment">#查看当前时区设置</span></span><br><span class="line">ls -l /etc/localtime</span><br><span class="line"><span class="comment">#修改时区</span></span><br><span class="line">ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br><span class="line"><span class="comment">#centos7</span></span><br><span class="line">timedatectl <span class="built_in">set</span>-timezone Asia/Shanghai</span><br><span class="line">timedatectl status</span><br></pre></td></tr></table></figure><h2 id="关闭firewall启用IPtable"><a href="#关闭firewall启用IPtable" class="headerlink" title="关闭firewall启用IPtable"></a>关闭firewall启用IPtable</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#停⽌firewall</span></span><br><span class="line">systemctl stop firewall.service</span><br><span class="line"><span class="comment">#关闭firewall⾃动启动</span></span><br><span class="line">systemctl <span class="built_in">disable</span> firewall.service</span><br><span class="line"><span class="comment">#安装iptable防⽕墙</span></span><br><span class="line">yum install -y iptables-services</span><br><span class="line"><span class="comment">#查看80端⼝占⽤</span></span><br><span class="line">lsof -i tcp:80</span><br><span class="line"><span class="comment">#列出所有端⼝</span></span><br><span class="line">netstat -ntlp</span><br><span class="line"><span class="comment">#查看配置</span></span><br><span class="line">iptables -L -n</span><br><span class="line"><span class="comment">#添加端⼝</span></span><br><span class="line">vi /etc/sysconfig/iptables</span><br><span class="line"><span class="comment">#添加</span></span><br><span class="line">-A INPUT -m state –state NEW -m tcp -p tcp –dport 80 -j ACCEPT</span><br><span class="line"><span class="comment">#或者</span></span><br><span class="line">iptables -A INPUT -p tcp –-dport 80 -j ACCEPT</span><br><span class="line"><span class="comment">#保存</span></span><br><span class="line">iptables save</span><br><span class="line"><span class="comment">#重启iptables</span></span><br><span class="line">systemctl restart iptables.service</span><br><span class="line"><span class="comment">#添加iptables开机⾃启动</span></span><br><span class="line">systemctl <span class="built_in">enable</span> iptables.service</span><br><span class="line"><span class="comment">#查看状态</span></span><br><span class="line">systemctl status iptables</span><br><span class="line"><span class="comment">#永久关闭防⽕墙</span></span><br><span class="line">chkconfig iptables off</span><br><span class="line"><span class="comment">#永久关闭后启⽤</span></span><br><span class="line">chkconfig iptables on</span><br></pre></td></tr></table></figure><h2 id="关闭SELINUX"><a href="#关闭SELINUX" class="headerlink" title="关闭SELINUX"></a>关闭SELINUX</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/selinux/config</span><br><span class="line"><span class="comment">#注释掉下⾯两⾏</span></span><br><span class="line">SELINUX=enforcing</span><br><span class="line">SELINUXTYPE=targeted</span><br><span class="line"><span class="comment">#增加⼀⾏</span></span><br><span class="line">SELINUX=disabled</span><br><span class="line"><span class="comment">#保存，关闭</span></span><br><span class="line"><span class="comment">#命令设置临时关闭</span></span><br><span class="line">setenfore 0</span><br><span class="line"><span class="comment">#使设置启⽤，在这⾥最好重启⼀下系统，也可以稍后重启</span></span><br></pre></td></tr></table></figure><h2 id="更换源"><a href="#更换源" class="headerlink" title="更换源"></a>更换源</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/yum.repo.d</span><br><span class="line"><span class="comment">#备份</span></span><br><span class="line">mv CentOS-Base.repo CentOS-Base.repo.bak</span><br><span class="line"><span class="comment">#下载阿⾥源⽂件</span></span><br><span class="line">wget /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/</span><br><span class="line">repo/Centos-7.repo</span><br><span class="line"><span class="comment">#重建源数据缓存</span></span><br><span class="line">yum makecache</span><br></pre></td></tr></table></figure><h2 id="第三方源"><a href="#第三方源" class="headerlink" title="第三方源"></a>第三方源</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装 yum-plugin-priorities</span></span><br><span class="line">yum install -y yum-plugin-priorities</span><br><span class="line"><span class="comment">#设置，默认开启</span></span><br><span class="line">vim /etc/yum/pluginconf.d/priorities.conf</span><br><span class="line">enabled=1 开启</span><br><span class="line">enabled=0 关闭</span><br><span class="line"><span class="comment">#设置默认源的优先级：</span></span><br><span class="line"><span class="comment">#⼀般默认的源配置⾥⾯ [base], [updates], [extras]，[centosplus] 的 pr</span></span><br><span class="line">iority=1， [contrib] 的 priority=2，其他第三的软件源为：priority=N （</span><br><span class="line">推荐 N &gt; 10，N 可以为1到99的正整数，数值越⼩越优先）</span><br><span class="line"><span class="comment">#sudo vim /etc/yum.repos.d/CentOS-Base.repovim安装</span></span><br></pre></td></tr></table></figure><h2 id="vim安装"><a href="#vim安装" class="headerlink" title="vim安装"></a>vim安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y vim-enhanced</span><br></pre></td></tr></table></figure><h2 id="clean-boot"><a href="#clean-boot" class="headerlink" title="clean boot"></a>clean boot</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.使⽤如下命令查询⽬前安装在系统⾥的全部内核（kernel）</span></span><br><span class="line">$ rpm -q kernel</span><br><span class="line"><span class="comment"># 2.查询当前使⽤的内核（kernel）版本</span></span><br><span class="line">$ uname -a</span><br><span class="line"><span class="comment"># 3.删除除当前内核以外所有的内核</span></span><br><span class="line">$ rpm -e <span class="string">'内核版本号'</span></span><br><span class="line">$ rpm -e kernel-2.6.32-358.el6.i686</span><br><span class="line"><span class="comment"># 4.使⽤命令df -h 查看/boot分区的使⽤情况。</span></span><br></pre></td></tr></table></figure><h2 id="Git升级"><a href="#Git升级" class="headerlink" title="Git升级"></a>Git升级</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装编译git时需要的包</span></span><br><span class="line">$ yum -y install curl-devel expat-devel gettext-devel openssl-devel zlib-devel</span><br><span class="line">$ yum -y install gcc perl-ExtUtils-MakeMaker</span><br><span class="line"><span class="comment"># 删除已有的git</span></span><br><span class="line">$ yum remove git</span><br><span class="line"><span class="comment"># 下载git源码</span></span><br><span class="line">$ <span class="built_in">cd</span> /usr/src</span><br><span class="line">$ wget https://www.kernel.org/pub/software/scm/git/git-2.19.2.tar.gz</span><br><span class="line">$ tar -xzf git-2.19.2.tar.gz</span><br><span class="line"><span class="comment"># 编译安装</span></span><br><span class="line">$ <span class="built_in">cd</span> git-2.19.2</span><br><span class="line">$ make prefix=/usr/<span class="built_in">local</span>/git all</span><br><span class="line">$ make prefix=/usr/<span class="built_in">local</span>/git install</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">"export PATH=<span class="variable">$PATH</span>:/usr/local/git/bin"</span> &gt;&gt; /etc/bashrc</span><br><span class="line">$ <span class="built_in">source</span> /etc/bashrc</span><br><span class="line"><span class="comment"># 检查⼀下版本号</span></span><br><span class="line">$ git --version</span><br></pre></td></tr></table></figure><h2 id="npm源更换"><a href="#npm源更换" class="headerlink" title="npm源更换"></a>npm源更换</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">alias</span> cnpm=<span class="string">"npm --registry=https://registry.npm.taobao.org \</span></span><br><span class="line"><span class="string">--cache=<span class="variable">$HOME</span>/.npm/.cache/cnpm \</span></span><br><span class="line"><span class="string">--disturl=https://npm.taobao.org/dist \</span></span><br><span class="line"><span class="string">--userconfig=<span class="variable">$HOME</span>/.cnpmrc"</span></span><br><span class="line"><span class="comment"># npm升级</span></span><br><span class="line">$ npm update npm</span><br></pre></td></tr></table></figure><h2 id="Tomcat时区更改"><a href="#Tomcat时区更改" class="headerlink" title="Tomcat时区更改"></a>Tomcat时区更改</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#在catalina.sh 第⼀⾏家⼀下⼀下脚本</span></span><br><span class="line">JAVA_OPTS=<span class="string">'-Xms1024m -Xmx1024m -XX:PermSize=256M -XX:MaxNewSize=512m </span></span><br><span class="line"><span class="string">-XX:MaxPermSize=512m'</span></span><br><span class="line">JAVA_OPTS=<span class="string">"<span class="variable">$JAVA_OPTS</span> -Dfile.encoding=UTF8 -Duser.timezone=GMT+08"</span></span><br></pre></td></tr></table></figure><h2 id="Tomcat端口更改"><a href="#Tomcat端口更改" class="headerlink" title="Tomcat端口更改"></a>Tomcat端口更改</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#在server.xml更改</span></span><br><span class="line">&lt;Connector port=<span class="string">"8088"</span> protocol=<span class="string">"HTTP/1.1"</span></span><br><span class="line">connectionTimeout=<span class="string">"20000"</span></span><br><span class="line">redirectPort=<span class="string">"8443"</span> URIEncoding=<span class="string">"UTF-8"</span> /&gt;</span><br></pre></td></tr></table></figure><h2 id="JDK安装"><a href="#JDK安装" class="headerlink" title="JDK安装"></a>JDK安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mkdir /usr/java</span><br><span class="line">tar -zxvf jdk-8u152-linux-x64.tar.gz</span><br><span class="line"><span class="comment">#编辑profile⽂件</span></span><br><span class="line">vim /etc/profile</span><br><span class="line">向⽂件⾥⾯追加以下内容：</span><br><span class="line"><span class="comment">#set java environment</span></span><br><span class="line">JAVA_HOME=/usr/java/jdk1.7.0_79</span><br><span class="line">JRE_HOME=<span class="variable">$JAVA_HOME</span>/jre</span><br><span class="line">PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$JRE_HOME</span>/bin</span><br><span class="line">CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar:<span class="variable">$JRE_HOME</span>/lib</span><br><span class="line"><span class="built_in">export</span> JAVA_HOME JRE_HOME PATH CLASSPATH</span><br><span class="line"><span class="comment">#使配置⽂件⽣效：</span></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line">java -version</span><br></pre></td></tr></table></figure><h2 id="后台运行nohup"><a href="#后台运行nohup" class="headerlink" title="后台运行nohup"></a>后台运行nohup</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ps -ef|grep socsi-pay-app-payfor.jar</span><br><span class="line">ps -ef|grep socsi-pay-app-order-polling.jar</span><br><span class="line">ps -ef|grep socsi-pay-app-notify.jar</span><br><span class="line">nohup java -jar socsi-pay-app-payfor.jar 1&gt;/dev/null 2&gt;&amp;1 &amp;</span><br><span class="line">nohup java -jar socsi-pay-app-notify.jar 1&gt;/dev/null 2&gt;&amp;1 &amp;</span><br><span class="line">nohup java -jar socsi-pay-app-order-polling.jar 1&gt;/dev/null 2&gt;&amp;1&amp;</span><br></pre></td></tr></table></figure><h2 id="ngrok"><a href="#ngrok" class="headerlink" title="ngrok"></a>ngrok</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1:4040/http/<span class="keyword">in</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;网络配置&quot;&gt;&lt;a href=&quot;#网络配置&quot; class=&quot;headerlink&quot; title=&quot;网络配置&quot;&gt;&lt;/a&gt;网络配置&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#最⼩化安装CentOS7，⾸先需要配置⽹络&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vi /etc/sysconfig/network-scripts/ifcfg-eno33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#修改&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ONBOOT=yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#静态ip&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BOOTPROTO=static&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;IPADDR=192.168.3.130 &lt;span class=&quot;comment&quot;&gt;#本机地址&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NETMASK=255.255.255.0 &lt;span class=&quot;comment&quot;&gt;#⼦⽹掩码&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GATEWAY=192.168.3.1 &lt;span class=&quot;comment&quot;&gt;#默认⽹关&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DNS1=8.8.8.8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DNS2=114.114.114.114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#重启⽹卡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl network restart&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#查看⽹卡信息&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ip addr&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#查看哪些组件包含了ifconfig命令&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum &lt;span class=&quot;string&quot;&gt;&#39;provides&#39;&lt;/span&gt; ifconfig&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#或&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum whatprovides ifconfig&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#安装&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum install -y net-tools&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="运维π" scheme="http://8oc.cc/categories/%E8%BF%90%E7%BB%B4%CF%80/"/>
    
    
      <category term="CentOS" scheme="http://8oc.cc/tags/CentOS/"/>
    
  </entry>
  
  <entry>
    <title>轻量级运维</title>
    <link href="http://8oc.cc/2020/09/26/fast-yunwei/"/>
    <id>http://8oc.cc/2020/09/26/fast-yunwei/</id>
    <published>2020-09-26T04:43:07.000Z</published>
    <updated>2020-10-01T14:17:53.114Z</updated>
    
    <content type="html"><![CDATA[<h2 id="CentOS时区设置"><a href="#CentOS时区设置" class="headerlink" title="CentOS时区设置"></a>CentOS时区设置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看当前时区设置</span></span><br><span class="line">ls -l /etc/localtime</span><br><span class="line"><span class="comment">#修改时区</span></span><br><span class="line">ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br></pre></td></tr></table></figure><h2 id="Tomcat时区更改"><a href="#Tomcat时区更改" class="headerlink" title="Tomcat时区更改"></a>Tomcat时区更改</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#在catalina.sh 第⼀⾏家⼀下⼀下脚本</span></span><br><span class="line">JAVA_OPTS=<span class="string">'-Xms1024m -Xmx1024m -XX:PermSize=256M -XX:MaxNewSize=512m </span></span><br><span class="line"><span class="string">-XX:MaxPermSize=512m'</span></span><br><span class="line">JAVA_OPTS=<span class="string">"<span class="variable">$JAVA_OPTS</span> -Dfile.encoding=UTF8 -Duser.timezone=GMT+08"</span></span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="Tomcat端口更改"><a href="#Tomcat端口更改" class="headerlink" title="Tomcat端口更改"></a>Tomcat端口更改</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#在server.xml更改</span></span><br><span class="line">&lt;Connector port=<span class="string">"8088"</span> protocol=<span class="string">"HTTP/1.1"</span></span><br><span class="line">connectionTimeout=<span class="string">"20000"</span></span><br><span class="line">redirectPort=<span class="string">"8443"</span> URIEncoding=<span class="string">"UTF-8"</span> /&gt;</span><br></pre></td></tr></table></figure><h2 id="JDK安装"><a href="#JDK安装" class="headerlink" title="JDK安装"></a>JDK安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mkdir /usr/java</span><br><span class="line">tar -zxvf jdk-8u152-linux-x64.tar.gz</span><br><span class="line"><span class="comment">#编辑profile⽂件</span></span><br><span class="line">vim /etc/profile</span><br><span class="line">向⽂件⾥⾯追加以下内容：</span><br><span class="line"><span class="comment">#set java environment</span></span><br><span class="line">JAVA_HOME=/usr/java/jdk1.7.0_79</span><br><span class="line">JRE_HOME=<span class="variable">$JAVA_HOME</span>/jre</span><br><span class="line">PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$JRE_HOME</span>/bin</span><br><span class="line">CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar:<span class="variable">$JRE_H</span></span><br><span class="line">OME/lib</span><br><span class="line"><span class="built_in">export</span> JAVA_HOME JRE_HOME PATH CLASSPATH</span><br><span class="line"><span class="comment">#使配置⽂件⽣效：</span></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line">java -version</span><br></pre></td></tr></table></figure><h2 id="防火墙firewall-弃用"><a href="#防火墙firewall-弃用" class="headerlink" title="防火墙firewall(弃用)"></a>防火墙firewall(弃用)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1、查看firewall服务状态</span></span><br><span class="line">systemctl status firewalld</span><br><span class="line"><span class="comment">#2、查看firewall的状态</span></span><br><span class="line">firewall-cmd --state</span><br><span class="line"><span class="comment">#3、开启、重启、关闭、firewalld.service服务</span></span><br><span class="line"><span class="comment"># 开启</span></span><br><span class="line">service firewalld start</span><br><span class="line"><span class="comment"># 重启</span></span><br><span class="line">service firewalld restart</span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line">service firewalld stop</span><br><span class="line"><span class="comment">#4、查看防⽕墙规则</span></span><br><span class="line">firewall-cmd --list-all</span><br><span class="line"><span class="comment">#5、查询、开放、关闭端⼝</span></span><br><span class="line"><span class="comment"># 查询端⼝是否开放</span></span><br><span class="line">firewall-cmd --query-port=8080/tcp</span><br><span class="line"><span class="comment"># 开放80端⼝</span></span><br><span class="line">firewall-cmd --permanent --add-port=80/tcp</span><br><span class="line">firewall-cmd --permanent --add-port=8088/tcp</span><br><span class="line">firewall-cmd --permanent --add-port=3306/tcp</span><br><span class="line"><span class="comment"># 移除端⼝</span></span><br><span class="line">firewall-cmd --permanent --remove-port=8080/tcp</span><br><span class="line"><span class="comment">#重启防⽕墙(修改配置后要重启防⽕墙)</span></span><br><span class="line">firewall-cmd --reload</span><br><span class="line"><span class="comment"># 参数解释</span></span><br><span class="line"><span class="comment">#1、firwall-cmd：是Linux提供的操作firewall的⼀个⼯具；</span></span><br><span class="line"><span class="comment">#2、--permanent：表示设置为持久；</span></span><br><span class="line"><span class="comment">#3、--add-port：标识添加的端⼝；</span></span><br></pre></td></tr></table></figure><h2 id="ActiveMQ安装"><a href="#ActiveMQ安装" class="headerlink" title="ActiveMQ安装"></a>ActiveMQ安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf apache-activemq-5.14.0-bin.tar.gz</span><br><span class="line">./activemq start</span><br><span class="line"><span class="comment">#(使⽤IPtables防⽕墙)</span></span><br><span class="line">添加防⽕墙的端⼝8161和61616</span><br><span class="line">firewall-cmd --add-port=8161/tcp</span><br><span class="line">firewall-cmd --add-port=6161/tcp</span><br><span class="line">查看添加的端⼝</span><br><span class="line">firewall-cmd --list-all</span><br><span class="line">命令：重启防⽕墙systemctl restart firewalld</span><br><span class="line">查看防⽕墙状态firewall-cmd --state</span><br><span class="line"><span class="comment">#重启防⽕墙(修改配置后要重启防⽕墙)</span></span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><h2 id="后台运行nohup"><a href="#后台运行nohup" class="headerlink" title="后台运行nohup"></a>后台运行nohup</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ps -ef|grep xxx-pay-app-payfor.jar</span><br><span class="line">ps -ef|grep xxx-pay-app-order-polling.jar</span><br><span class="line">ps -ef|grep xxx-pay-app-notify.jar</span><br><span class="line">nohup java -jar xxx-pay-app-payfor.jar 1&gt;/dev/null 2&gt;&amp;1 &amp;</span><br><span class="line">nohup java -jar xxx-pay-app-notify.jar 1&gt;/dev/null 2&gt;&amp;1 &amp;</span><br><span class="line">nohup java -jar xxx-pay-app-order-polling.jar 1&gt;/dev/null 2&gt;&amp;1&amp;</span><br></pre></td></tr></table></figure><h2 id="ngrok"><a href="#ngrok" class="headerlink" title="ngrok"></a>ngrok</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1:4040/http/<span class="keyword">in</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;CentOS时区设置&quot;&gt;&lt;a href=&quot;#CentOS时区设置&quot; class=&quot;headerlink&quot; title=&quot;CentOS时区设置&quot;&gt;&lt;/a&gt;CentOS时区设置&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#查看当前时区设置&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ls -l /etc/localtime&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#修改时区&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;Tomcat时区更改&quot;&gt;&lt;a href=&quot;#Tomcat时区更改&quot; class=&quot;headerlink&quot; title=&quot;Tomcat时区更改&quot;&gt;&lt;/a&gt;Tomcat时区更改&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#在catalina.sh 第⼀⾏家⼀下⼀下脚本&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;JAVA_OPTS=&lt;span class=&quot;string&quot;&gt;&#39;-Xms1024m -Xmx1024m -XX:PermSize=256M -XX:MaxNewSize=512m &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;				-XX:MaxPermSize=512m&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;JAVA_OPTS=&lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;variable&quot;&gt;$JAVA_OPTS&lt;/span&gt; -Dfile.encoding=UTF8 -Duser.timezone=GMT+08&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="运维π" scheme="http://8oc.cc/categories/%E8%BF%90%E7%BB%B4%CF%80/"/>
    
    
      <category term="CentOS" scheme="http://8oc.cc/tags/CentOS/"/>
    
  </entry>
  
  <entry>
    <title>log4j.properties 详解与配置步骤</title>
    <link href="http://8oc.cc/2020/09/26/log4j-set/"/>
    <id>http://8oc.cc/2020/09/26/log4j-set/</id>
    <published>2020-09-26T04:16:46.000Z</published>
    <updated>2020-09-26T05:14:13.908Z</updated>
    
    <content type="html"><![CDATA[<h2 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#配置根⽬录</span></span><br><span class="line">log4j.rootLogger = DEBUG, stdout, R</span><br><span class="line"><span class="comment">#控制台输出</span></span><br><span class="line">log4j.appender.stdout=org.apache.log4j.ConsoleAppender</span><br><span class="line"><span class="comment">#可以灵活地指定布局模式</span></span><br><span class="line">log4j.appender.stdout.layout=org.apache.log4j.PatternLayout</span><br><span class="line"><span class="comment">#输出格式</span></span><br><span class="line">log4j.appender.stdout.layout.ConversionPattern=%-d&#123;yyyy-MM-dd HH:</span><br><span class="line">mm:ss,SSS&#125; [%t] [%c]-[%p] %m%n</span><br><span class="line"><span class="comment">#写⼊到⽂件（⽂件⼤⼩到达指定尺⼨的时候产⽣⼀个新的⽂件）</span></span><br><span class="line">log4j.appender.R=org.apache.log4j.RollingFileAppender</span><br><span class="line"><span class="comment">#设置⽇志名，默认存储在tomcat/bin⽬录下</span></span><br><span class="line">log4j.appender.R.File=taotao.log</span><br><span class="line"><span class="comment">#⽂件⼤⼩（KB, MB 或者是 GB）</span></span><br><span class="line">log4j.appender.R.MaxFileSize=100KB</span><br><span class="line"><span class="comment">#设置备份</span></span><br><span class="line">log4j.appender.R.MaxBackupIndex=1</span><br><span class="line"><span class="comment">#可以灵活地指定布局模式</span></span><br><span class="line">log4j.appender.R.layout=org.apache.log4j.PatternLayout</span><br><span class="line"><span class="comment">#输出格式</span></span><br><span class="line">log4j.appender.R.layout.ConversionPattern=%-d&#123;yyyy-MM-dd HH:mm:ss</span><br><span class="line">,SSS&#125; [%t] [%c]-[%p] %m%n</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="参数详解"><a href="#参数详解" class="headerlink" title="参数详解"></a>参数详解</h2><blockquote><p>1.输出级别的种类</p><blockquote><p>ERROR、WARN、INFO、DEBUG<br>ERROR 为严重错误 主要是程序的错误<br>WARN 为一般警告，比如session丢失<br>INFO 为一般要显示的信息，比如登录登出<br>DEBUG 为程序的调试信息</p></blockquote><p>2.配置日志信息输出目的地</p><blockquote><p>log4j.appender.appenderName = fully.qualified.name.of.appender.class<br>org.apache.log4j.ConsoleAppender（控制台）<br>org.apache.log4j.FileAppender（文件）<br>org.apache.log4j.DailyRollingFileAppender（每天产生一个日志文件）<br>org.apache.log4j.RollingFileAppender（文件大小到达指定尺寸的时候产生一个新的文件）</p></blockquote><p>3.配置日志信息的格式</p><blockquote><p>log4j.appender.appenderName.layout = fully.qualified.name.of.layout.class<br>org.apache.log4j.HTMLLayout（以HTML表格形式布局）<br>org.apache.log4j.PatternLayout（可以灵活地指定布局模式）<br>org.apache.log4j.SimpleLayout（包含日志信息的级别和信息字符串）<br>org.apache.log4j.TTCCLayout（包含日志产生的时间、线程、类别)</p></blockquote><p>4.控制台选项</p><blockquote><p>RollingFileAppender 选项<br>Threshold=DEBUG:指定日志消息的输出最低层次<br>ImmediateFlush=true:默认值是true,意谓着所有的消息都会被立即输出<br>File=mylog.txt:指定消息输出到mylog.txt文件<br>Append=false:默认值是true,即将消息增加到指定文件中，false指将消息覆盖指定的文件内容。<br>MaxFileSize=100KB: 后缀可以是KB, MB 或者是 GB. 在日志文件到达该大小时，将会自动滚动，即将原来的内容移到mylog.log.1文件<br>MaxBackupIndex=2:指定可以产生的滚动文件的最大数。<br>log4j.appender.A1.layout.ConversionPattern=%-4r %-5p %d{yyyy-MM-dd HH:mm:ssS} %c %m%n</p></blockquote><p>5.日志信息格式中几个符号所代表的含义</p><blockquote><p>-X号: X信息输出时左对齐；<br>%p: 输出日志信息优先级，即DEBUG，INFO，WARN，ERROR，FATAL<br>%d: 输出日志时间点的日期或时间，默认格式为ISO8601，也可以在其后指定格式，比如：%d{yyy MMM dd HH:mm:ss,SSS}，输出类似：2002年10月18日 22：10：28，921<br>%r: 输出自应用启动到输出该log信息耗费的毫秒数<br>%c: 输出日志信息所属的类目，通常就是所在类的全名<br>%t: 输出产生该日志事件的线程名<br>%l: 输出日志事件的发生位置，相当于%C.%M(%F:%L)的组合,包括类目名、发生的线程，以及在代码中的行数。举例：Testlog4.main(TestLog4.java:10)<br>%x: 输出和当前线程相关联的NDC(嵌套诊断环境),尤其用到像java servlets这样的多客户多线程的应用中。<br>%%: 输出一个”%”字符<br>%F: 输出日志消息产生时所在的文件名称<br>%L: 输出代码中的行号<br>%m: 输出代码中指定的消息,产生的日志具体信息<br>%n: 输出一个回车换行符，Windows平台为”/r/n”，Unix平台为”/n”输出日志信息换行</p></blockquote><p>可以在%与模式字符之间加上修饰符来控制其最小宽度、最大宽度、和文本的对齐方式。</p><blockquote><p>1) %20c：指定输出category的名称，最小的宽度是20，如果category的名称小于20的话，默认的情况下右对齐<br>2) %-20c:指定输出category的名称，最小的宽度是20，如果category的名称小于20的话，”-“号指定左对齐<br>3) %.30c:指定输出category的名称，最大的宽度是30，如果category的名称大于30的话，就会将左边多出的字符截掉，但小于30的话也不会有空格<br>4) %20.30c:如果category的名称小于20就补空格，并且右对齐，如果其名称长于30字符，就从左边较远输出的字符截掉</p></blockquote></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;模板&quot;&gt;&lt;a href=&quot;#模板&quot; class=&quot;headerlink&quot; title=&quot;模板&quot;&gt;&lt;/a&gt;模板&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#配置根⽬录&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;log4j.rootLogger = DEBUG, stdout, R&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#控制台输出&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;log4j.appender.stdout=org.apache.log4j.ConsoleAppender&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#可以灵活地指定布局模式&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;log4j.appender.stdout.layout=org.apache.log4j.PatternLayout&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#输出格式&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;log4j.appender.stdout.layout.ConversionPattern=%-d&amp;#123;yyyy-MM-dd HH:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mm:ss,SSS&amp;#125; [%t] [%c]-[%p] %m%n&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#写⼊到⽂件（⽂件⼤⼩到达指定尺⼨的时候产⽣⼀个新的⽂件）&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;log4j.appender.R=org.apache.log4j.RollingFileAppender&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#设置⽇志名，默认存储在tomcat/bin⽬录下&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;log4j.appender.R.File=taotao.log&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#⽂件⼤⼩（KB, MB 或者是 GB）&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;log4j.appender.R.MaxFileSize=100KB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#设置备份&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;log4j.appender.R.MaxBackupIndex=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#可以灵活地指定布局模式&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;log4j.appender.R.layout=org.apache.log4j.PatternLayout&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#输出格式&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;log4j.appender.R.layout.ConversionPattern=%-d&amp;#123;yyyy-MM-dd HH:mm:ss&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;,SSS&amp;#125; [%t] [%c]-[%p] %m%n&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="开发π" scheme="http://8oc.cc/categories/%E5%BC%80%E5%8F%91%CF%80/"/>
    
    
      <category term="Java" scheme="http://8oc.cc/tags/Java/"/>
    
      <category term="log4j" scheme="http://8oc.cc/tags/log4j/"/>
    
  </entry>
  
</feed>
